(function(){function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var a,i=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;a=Reflect.construct(i,arguments,n)}else a=i.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{K7LP:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var i=function(){function t(e){var a=this;_classCallCheck(this,t),this.indexService=e,this.auth={};var i=this.indexService.menuChange.subscribe((function(t){a.baseInit(),i.unsubscribe()}))}return _createClass(t,[{key:"baseInit",value:function(){var t,e,a,i,n,c=this;this.menu=null===(e=null===(t=this.indexService.auth.user.permissions)||void 0===t?void 0:t.menus)||void 0===e?void 0:e.find((function(t){return t.router==c.indexService.session.activatedPage})),this.actions=null===(i=null===(a=this.indexService.auth.user.permissions)||void 0===a?void 0:a.actions)||void 0===i?void 0:i.filter((function(t){var e;return t.menuId==(null===(e=c.menu)||void 0===e?void 0:e.id)})),null===(n=this.actions)||void 0===n||n.forEach((function(t){return c.auth[t.code]=!0}))}},{key:"unAuth",value:function(t){return!this.auth[t]}}]),t}()},LZRM:function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var i=a("bRdP"),n=a("NtM8"),c=a("fXoL"),r=function(){var t=function(t){_inherits(a,t);var e=_createSuper(a);function a(t){var i;return _classCallCheck(this,a),(i=e.call(this,t,{controller:{name:"contacts",servicetype:"businessprocess"}})).http=t,i}return _createClass(a,[{key:"updatecontactinfo",value:function(t){var e,a;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/updatecontactinfo",t,null===(a=this.option.controller)||void 0===a?void 0:a.servicetype)}},{key:"getcontactproject",value:function(t){var e,a;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/getcontactproject",{contactid:t},null===(a=this.option.controller)||void 0===a?void 0:a.servicetype)}},{key:"addcontactproject",value:function(t){var e,a;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/addcontactproject",t,null===(a=this.option.controller)||void 0===a?void 0:a.servicetype)}},{key:"updatecontacttest",value:function(t){var e,a;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/updatecontacttest",t,null===(a=this.option.controller)||void 0===a?void 0:a.servicetype)}},{key:"updateprojectnumer",value:function(t,e){var a;return this.http.post("contactprojects/updateprojectnumer",{contactid:t,standardfee:e},null===(a=this.option.controller)||void 0===a?void 0:a.servicetype)}}]),a}(i.a);return t.\u0275fac=function(e){return new(e||t)(c.Sb(n.a))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},bwiJ:function bwiJ(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return AddsampleComponent}));var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("fXoL"),src_services_sample_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("GTjD"),src_main_qualification_qualification_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("M3sX"),src_share_utilclass__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("BzWU"),_businessproject_businessproject_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("x2e1"),src_main_qualification_qualification_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("OROO"),_ng_nest_ui__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("qMpK"),_ng_nest_ui__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("l5Yv"),_ng_nest_ui__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("SfH5"),_ng_nest_ui__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("GvSL"),_ng_nest_ui__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("P0lq"),_ng_nest_ui__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("oJeN"),_ng_nest_ui_inner__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("1uEr"),_angular_forms__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("3Pt+"),_ng_nest_ui_table__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("yO6f"),_ng_nest_ui_link__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("kXfN"),_c0=["inputsamplename"],_c1=["inputsamplequality"],_c2=["inputsampleprice"],_c3=["inputexternice"],_c4=["selqual"],_c5=["externselqual"];function AddsampleComponent_ng_template_61_Template(t,e){if(1&t){var a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Pb();_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(0,"div",34),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(1,"x-link",35),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("click",(function(){_angular_core__WEBPACK_IMPORTED_MODULE_0__.mc(a);var t=e.$row,i=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb();return!i.disabled&&!i.methodInvalid&&i.projectaction("delete",t)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb()}if(2&t){var i=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb();_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",i.formInvalid||i.disabled)}}function AddsampleComponent_ng_template_63_Template(t,e){if(1&t){var a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Pb();_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(0,"div",34),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(1,"x-link",35),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("click",(function(){_angular_core__WEBPACK_IMPORTED_MODULE_0__.mc(a);var t=e.$row,i=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb();return!i.disabled&&!i.methodInvalid&&i.externprojectaction("delete",t)})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb()}if(2&t){var i=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yb();_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",i.formInvalid||i.disabled)}}var _c6=function(t){return{actions:t}},AddsampleComponent=function(){var AddsampleComponent=function(){function AddsampleComponent(t,e,a,i){_classCallCheck(this,AddsampleComponent),this.service=t,this.commonservice=e,this.message=a,this.domainservice=i,this.currentcontact={},this.sendaddsample=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.n,this.qualitreeheight="300px",this.producthidden="inline",this.invalidstring="",this.projectdata=[],this.projecttotal=0,this.projectsize=20,this.projectindex=1,this.projectquery={filter:[]},this.projectcolumns=[{id:"actions",label:"\u64cd\u4f5c",width:80},{id:"testproject",label:"\u9879\u76ee",width:200,sort:!0},{id:"standardname",label:"\u68c0\u6d4b\u6807\u51c6",width:200,sort:!0},{id:"price",label:"\u6807\u51c6\u4ef7\u683c",width:200,sort:!0},{id:"realprice",label:"\u5b9e\u9645\u4ef7\u683c",width:200,sort:!0}],this.externprojectcolumns=[{id:"actions",label:"\u64cd\u4f5c",width:80},{id:"testproject",label:"\u68c0\u6d4b\u9879\u76ee",width:200,sort:!0}],this.process=[],this.processid=1,this.externprojectdata=[],this.qexternvisible=!1,this.externtotal=0,this.externprojecttotal=0,this.externprojectsize=20,this.externprojectindex=1,this.externprojectquery={filter:[]},this.qvisible=!1,this.samplemethod=[],this.showTableBoolean=!1,this.showdivBoolean=!1}return _createClass(AddsampleComponent,[{key:"quaconfirm",value:function quaconfirm(){for(var _this4=this,_a,tempdata=[],i=0;i<this.qualificationcomponent.selquali.length;i++)tempdata.push({id:src_share_utilclass__WEBPACK_IMPORTED_MODULE_3__.a.JsNewGuid(),sampleid:(null===(_a=this.currentsample)||void 0===_a?void 0:_a.id)+"",qualificationid:this.qualificationcomponent.selquali[i].id+"",testproject:this.qualificationcomponent.selquali[i].testproject,methodname:this.qualificationcomponent.selquali[i].methodname,price:this.qualificationcomponent.selquali[i].price,realprice:this.qualificationcomponent.selquali[i].price,testcount:this.qualificationcomponent.selquali[i].testcount,isextern:0});this.service.getsamplestandardprice(tempdata).subscribe((function(x){_this4.projectdata=[],_this4.currentsample.standardfee=x.price,x.formulars.map((function(y){var formularprice=eval(y.formular),limitprice=0==y.limitprice?formularprice:y.limitprice;_this4.currentsample.standardfee=_this4.currentsample.standardfee+(formularprice<=limitprice?formularprice:limitprice)})),tempdata.map((function(t){return _this4.projectdata.push(t)}))}))}},{key:"getproject",value:function(){var t,e,a=this;this.projectdata=[],this.externprojectdata=[],this.processid=null!=this.currentsample.process?Number(null===(t=this.currentsample.process)||void 0===t?void 0:t.id):2,null===(e=this.currentsample.testprojects)||void 0===e||e.map((function(t){0==t.isextern?a.projectdata.push(t):1==t.isextern&&a.externprojectdata.push(t)})),this.projecttotal=Number(this.projectdata.length),this.externtotal=Number(this.externprojectdata.length),this.projectdata=_toConsumableArray(this.projectdata),this.externprojectdata=_toConsumableArray(this.externprojectdata)}},{key:"exterquaconfirm",value:function(){var t;this.externprojectdata=[];for(var e=0;e<this.externselqual.selquali.length;e++)this.externprojectdata.push({id:src_share_utilclass__WEBPACK_IMPORTED_MODULE_3__.a.JsNewGuid(),sampleid:(null===(t=this.currentsample)||void 0===t?void 0:t.id)+"",qualificationid:this.externselqual.selquali[e].id+"",testproject:this.externselqual.selquali[e].testproject,isextern:1});this.externtotal=this.externprojectdata.length}},{key:"externprojectaction",value:function(t,e){var a=this;switch(this.externselqual.getData(!0),t){case"add":"add"!=this.type&&"edit"!=this.type||(this.qexternvisible=!0),this.externselqual.selquali=[],this.externprojectdata.forEach((function(t){a.externselqual.selquali.push({id:Number(t.qualificationid),testproject:t.testproject,testcount:t.testcount})})),this.externselqual.refreshdata();break;case"delete":this.deleteprojectmethod((null==e?void 0:e.id)+"",this.externprojectdata),this.externprojectdata=_toConsumableArray(this.externprojectdata)}}},{key:"ngDoCheck",value:function(){}},{key:"projectaction",value:function(t,e){var a=this;switch(this.qualificationcomponent.getData(!1),t){case"add":"add"!=this.type&&"edit"!=this.type||(this.qvisible=!0),this.qualificationcomponent.selquali=[],this.projectdata.forEach((function(t){a.qualificationcomponent.selquali.push({id:Number(t.qualificationid),testproject:t.testproject,testcount:t.testcount})})),this.qualificationcomponent.refreshdata();break;case"delete":this.deleteprojectmethod((null==e?void 0:e.id)+"",this.projectdata),this.projectdata=_toConsumableArray(this.projectdata)}}},{key:"deleteprojectmethod",value:function(t,e){var a=null==e?void 0:e.findIndex((function(e){return e.id===t}));null==e||e.splice(Number(a),1)}},{key:"setcurrent",value:function(t,e){this.currentsample=e,this.type=t,this.action(t),this.getproject()}},{key:"ngOnInit",value:function(){var t=this;this.domainservice.getList(1,20,{}).subscribe((function(e){t.domaindata=e.list,t.currentsample.domainid=Number(t.domaindata[0].id)})),setTimeout((function(){t.showTableBoolean=!0}),3e3),setTimeout((function(){t.showdivBoolean=!0}),0)}},{key:"ngAfterViewInit",value:function(){}},{key:"setsavedata",value:function(){var t=this;this.currentsample.testproject="",this.currentsample.methodname="",this.currentsample.testprojects=[];for(var e=this.projectdata.concat(this.externprojectdata),a=0;a<e.length;a++)this.currentsample.testproject+=e[a].testproject,this.currentsample.methodname+=e[a].standardname,a!=e.length-1&&(this.currentsample.testproject+=",",this.currentsample.methodname+=","),this.currentsample.testprojects.push(e[a]);var i=this.process.findIndex((function(e){return e.id==t.processid}));-1!=i&&(this.currentsample.process=this.process[i])}},{key:"action",value:function(t){if(null!=this.currentsample)switch(t){case"info":this.getproject();break;case"edit":this.action("info");break;case"save":this.setsavedata(),"add"===this.type?this.sendaddsample.emit("add"):"edit"===this.type&&this.sendaddsample.emit("edit");break;case"cancel":this.sendaddsample.emit("cancel")}this.qvisible=!1}},{key:"formInvalid",get:function(){return!!this.methodInvalid||0==this.projectdata.length&&(this.invalidstring="\u6837\u54c1\u68c0\u6d4b\u9879\u76ee\u4e3a\u7a7a!",!0)}},{key:"methodInvalid",get:function(){return this.invalidstring="",null==this.inputsamplename||null!=this.inputsamplename.value&&""!=this.inputsamplename.value?null==this.inputsamplequality||null!=this.inputsamplequality.value&&""!=this.inputsamplequality.value?null==this.inputsamplequality||null==this.inputsamplequality.value||/^[0-9]{1,10}$/.test(this.inputsamplequality.value)?null==this.inputsampleprice||null!=this.inputsampleprice.value&&""!=this.inputsampleprice.value?(null!=this.inputsampleprice&&null!=this.inputsampleprice.value&&isNaN(this.inputsampleprice.value)||!(null==this.inputexternice||null==this.inputexternice.value||!isNaN(this.inputexternice.value)))&&(this.invalidstring="\u6837\u54c1\u4ef7\u683c\u53ea\u80fd\u662f\u6570\u5b57!",!0):(this.invalidstring="\u6837\u54c1\u4ef7\u683c\u4e3a\u7a7a!",!0):(this.invalidstring="\u6837\u54c1\u6570\u91cf\u53ea\u80fd\u662f\u6570\u5b57!",!0):(this.invalidstring="\u6837\u54c1\u6570\u91cf\u4e3a\u7a7a!",!0):(this.invalidstring="\u6837\u54c1\u540d\u79f0\u4e3a\u7a7a!",!0)}},{key:"disabled",get:function(){return"info"===this.type}}]),AddsampleComponent}();return AddsampleComponent.\u0275fac=function(t){return new(t||AddsampleComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ib(src_services_sample_service__WEBPACK_IMPORTED_MODULE_1__.a),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ib(_businessproject_businessproject_service__WEBPACK_IMPORTED_MODULE_4__.c),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ib(_ng_nest_ui__WEBPACK_IMPORTED_MODULE_6__.c),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ib(src_main_qualification_qualification_service__WEBPACK_IMPORTED_MODULE_2__.d))},AddsampleComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Cb({type:AddsampleComponent,selectors:[["app-addsample"]],viewQuery:function(t,e){var a;1&t&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Cc(_c0,!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Cc(_c1,!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Cc(_c2,!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Cc(_c3,!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Cc(_c4,!0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Cc(_c5,!0)),2&t&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.jc(a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Wb())&&(e.inputsamplename=a.first),_angular_core__WEBPACK_IMPORTED_MODULE_0__.jc(a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Wb())&&(e.inputsamplequality=a.first),_angular_core__WEBPACK_IMPORTED_MODULE_0__.jc(a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Wb())&&(e.inputsampleprice=a.first),_angular_core__WEBPACK_IMPORTED_MODULE_0__.jc(a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Wb())&&(e.inputexternice=a.first),_angular_core__WEBPACK_IMPORTED_MODULE_0__.jc(a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Wb())&&(e.qualificationcomponent=a.first),_angular_core__WEBPACK_IMPORTED_MODULE_0__.jc(a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Wb())&&(e.externselqual=a.first))},inputs:{currentsample:"currentsample",domaindisabled:"domaindisabled"},outputs:{sendaddsample:"sendaddsample"},decls:65,vars:45,consts:[["width","80%","height","50%","placement","top",3,"visible","backdropClose","hasBackdrop","visibleChange","confirm"],["dialogqulification",""],[2,"width","100%","height","100%",3,"tablespan","modify","treespan","producthidden","qualitreeheight"],["selqual",""],["width","35%","height","50%","placement","top",3,"visible","backdropClose","hasBackdrop","visibleChange","confirm"],["dialogexterqulification",""],[2,"width","100%","height","100%",3,"modify","tablespan","treespan"],["externselqual",""],[1,"au-inner","au-column"],["span","4"],["plain","","size","small","icon","fto-chevron-left",3,"click"],["icon","fto-save","type","primary","plain","","size","small",3,"disabled","click"],["span","16"],["id","displaytag",2,"color","crimson","font-size","10pt"],[2,"height","20px"],["span","8"],["label","\u6837\u54c1\u540d\u79f0","required","","direction","row",3,"disabled","ngModel","ngModelChange"],["inputsamplename",""],["span","2"],["span","6"],[3,"disabled","data","ngModel","ngModelChange"],["label","\u6837\u54c1\u4ef7\u683c","required","","direction","row",3,"disabled","ngModel","ngModelChange"],["inputsampleprice",""],["readonly","true","label","\u6807\u51c6\u68c0\u6d4b\u8d39","direction","row",3,"disabled","ngModel","ngModelChange"],["inputexternice",""],[2,"text-align","center","font-weight","bolder","font-size","12pt"],[2,"height","20"],["icon","ado-search","plain","","size","small","type","primary",3,"disabled","click"],["adaptionHeight","600","virtualScroll","","loading","",1,"x-table.x-pagination",3,"data","columns","index","size","total","query","bodyColumnTpl","indexChange","sizeChange"],["projecttable",""],["plain","","size","small","icon","ado-search","type","primary",3,"disabled","click"],["adaptionHeight","600","virtualScroll","","loading","",3,"data","columns","index","size","total","query","bodyColumnTpl","indexChange","sizeChange"],["projectTpl",""],["exprojectTpl",""],[1,"au-table-actions"],["icon","fto-trash-2","title","\u5220\u9664",3,"disabled","click"]],template:function(t,e){if(1&t&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(0,"x-dialog",0,1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("visibleChange",(function(t){return e.qvisible=t}))("confirm",(function(){return e.quaconfirm()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jb(2,"app-qualification",2,3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(4,"x-dialog",4,5),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("visibleChange",(function(t){return e.qexternvisible=t}))("confirm",(function(){return e.exterquaconfirm()})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jb(6,"app-qualification",6,7),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(8,"x-inner",8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(9,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(10,"x-col",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(11,"x-button",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("click",(function(){return e.action("cancel")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc(12,"\u8fd4\u56de"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(13,"x-col",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(14,"x-button",11),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("click",(function(){return!e.formInvalid&&e.action("save")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc(15," \u4fdd\u5b58 "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(16,"x-col",12),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(17,"div",13),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc(18),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jb(19,"x-row",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(20,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(21,"x-col",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(22,"x-input",16,17),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("ngModelChange",(function(t){return e.currentsample.samplename=t})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(24,"x-col",18),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc(25," \u9886\u57df "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(26,"x-col",19),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(27,"x-select",20),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("ngModelChange",(function(t){return e.currentsample.domainid=t})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jb(28,"x-row",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(29,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(30,"x-col",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(31,"x-input",21,22),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("ngModelChange",(function(t){return e.currentsample.price=t})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(33,"x-col",15),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(34,"x-input",23,24),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("ngModelChange",(function(t){return e.currentsample.standardfee=t})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jb(36,"x-row",14),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(37,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(38,"x-col",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc(39," \u68c0\u6d4b\u9879\u76ee\u4fe1\u606f "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jb(40,"x-row",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(41,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(42,"x-col",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(43,"x-button",27),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("click",(function(){return!e.methodInvalid&&e.projectaction("add")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc(44," \u6dfb\u52a0 "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(45,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(46,"x-col"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(47,"x-table",28,29),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("indexChange",(function(t){return e.projectindex=t}))("sizeChange",(function(t){return e.projectsize=t})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(49,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(50,"x-col",25),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc(51," \u5916\u5305\u9879\u76ee\u4fe1\u606f "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jb(52,"x-row",26),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(53,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(54,"x-col",9),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(55,"x-button",30),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("click",(function(){return!e.methodInvalid&&e.externprojectaction("add")})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc(56," \u6dfb\u52a0 "),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(57,"x-row"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(58,"x-col"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Ob(59,"x-table",31,29),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Vb("indexChange",(function(t){return e.externprojectindex=t}))("sizeChange",(function(t){return e.externprojectsize=t})),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Nb(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.vc(61,AddsampleComponent_ng_template_61_Template,2,1,"ng-template",null,32,_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc),_angular_core__WEBPACK_IMPORTED_MODULE_0__.vc(63,AddsampleComponent_ng_template_63_Template,2,1,"ng-template",null,33,_angular_core__WEBPACK_IMPORTED_MODULE_0__.wc)),2&t){var a=_angular_core__WEBPACK_IMPORTED_MODULE_0__.kc(62),i=_angular_core__WEBPACK_IMPORTED_MODULE_0__.kc(64);_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("visible",e.qvisible)("backdropClose",!1)("hasBackdrop",!1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("tablespan",15)("modify",1)("treespan",5)("producthidden",e.producthidden)("qualitreeheight",e.qualitreeheight),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("visible",e.qexternvisible)("backdropClose",!1)("hasBackdrop",!1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("modify",1)("tablespan",10)("treespan",10),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",e.formInvalid||e.disabled),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yc(e.invalidstring),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",e.disabled)("ngModel",e.currentsample.samplename),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(5),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",e.domaindisabled||e.disabled)("data",e.domaindata)("ngModel",e.currentsample.domainid),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",e.disabled)("ngModel",e.currentsample.price),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",e.disabled)("ngModel",e.currentsample.standardfee),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(9),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",e.methodInvalid||e.disabled),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("data",e.projectdata)("columns",e.projectcolumns)("index",e.projectindex)("size",e.projectsize)("total",e.projecttotal)("query",e.projectquery)("bodyColumnTpl",_angular_core__WEBPACK_IMPORTED_MODULE_0__.gc(41,_c6,a)),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("disabled",e.methodInvalid||e.disabled),_angular_core__WEBPACK_IMPORTED_MODULE_0__.yb(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.ec("data",e.externprojectdata)("columns",e.externprojectcolumns)("index",e.externprojectindex)("size",e.externprojectsize)("total",e.externtotal)("query",e.externprojectquery)("bodyColumnTpl",_angular_core__WEBPACK_IMPORTED_MODULE_0__.gc(43,_c6,i))}},directives:[_ng_nest_ui__WEBPACK_IMPORTED_MODULE_7__.a,src_main_qualification_qualification_component__WEBPACK_IMPORTED_MODULE_5__.a,_ng_nest_ui_inner__WEBPACK_IMPORTED_MODULE_12__.a,_ng_nest_ui__WEBPACK_IMPORTED_MODULE_8__.c,_ng_nest_ui__WEBPACK_IMPORTED_MODULE_8__.a,_ng_nest_ui__WEBPACK_IMPORTED_MODULE_9__.a,_ng_nest_ui__WEBPACK_IMPORTED_MODULE_10__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.B,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.q,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.t,_ng_nest_ui__WEBPACK_IMPORTED_MODULE_11__.a,_ng_nest_ui_table__WEBPACK_IMPORTED_MODULE_14__.a,_ng_nest_ui_link__WEBPACK_IMPORTED_MODULE_15__.a],styles:[":host x-table.x-pagination{padding-top:.875rem;display:none}"],encapsulation:3}),AddsampleComponent}()},jnZo:function(t,e,a){"use strict";a.r(e),a.d(e,"EvirmentheathModule",(function(){return Yt}));var i,n=a("tyNb"),c=a("3pM9"),r=a("HDdC"),s=a("LvDl"),o=a("fXoL"),l=((i=function(){function t(){_classCallCheck(this,t),this.localdata=[]}return _createClass(t,[{key:"setlocaldata",value:function(t){this.localdata=t}},{key:"getList",value:function(t,e,a,i){var n=this;return new r.a((function(e){n.setFilter(t,(null==i?void 0:i.filterLogic)||"and",null==i?void 0:i.filter),e.complete()}))}},{key:"get",value:function(t){return new r.a}},{key:"post",value:function(t){return new r.a}},{key:"put",value:function(t){return new r.a}},{key:"delete",value:function(t){return new r.a}},{key:"setFilter",value:function(t,e,a){var i=t;return a&&a.length>0&&(i=t.filter((function(t){var i=!1;if("or"==e){for(var n=0;n<a.length;n++)if(t[a[n].field].indexOf(a[n].value)>=0){i=!0;break}}else if("and"==e)for(i=!0,n=0;n<a.length;n++)if(-1==t[a[n].field].indexOf(a[n].value)){i=!1;break}return i}))),i}},{key:"setGroup",value:function(t,e){return Object(s.map)(Object(c.L)(t,e),(function(t,a){var i={id:a,count:t.length};return i[e]=a,i}))}},{key:"setSort",value:function(t,e){return Object(s.orderBy)(t,Object(s.map)(e,(function(t){return t.field})),Object(s.map)(e,(function(t){return t.value})))}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275prov=o.Eb({token:i,factory:i.\u0275fac}),i),u=a("wTjX"),_=a("K7LP"),d=a("LZRM"),b=a("BzWU"),p=a("wd/R"),h=a("TPaT"),m=a("eIN6"),f=a("x2e1"),v=a("x6Xy"),g=a("qMpK"),O=a("SfH5"),E=a("GvSL"),C=a("yO6f"),y=["contacttable"];function M(t,e){if(1&t){var a=o.Pb();o.Ob(0,"div",5),o.Ob(1,"x-button",6),o.Vb("click",(function(){o.mc(a);var t=e.$row,i=o.Yb();return!i.submitdisable(t)&&i.auth.delete&&i.cotactaction("delete",t)})),o.xc(2,"\u5220\u9664"),o.Nb(),o.Ob(3,"x-button",7),o.Vb("click",(function(){o.mc(a);var t=e.$row,i=o.Yb();return!i.submitdisable(t)&&i.auth.submit&&i.cotactaction("submit",t)})),o.xc(4," \u63d0\u4ea4"),o.Nb(),o.Nb()}if(2&t){var i=e.$row,n=o.Yb();o.yb(1),o.ec("disabled",!n.auth.delete||n.submitdisable(i)),o.yb(2),o.ec("disabled",!n.auth.submit||n.submitdisable(i))}}var P,D,x,I,w=function(t){return{actions:t}},k=((P=function(t){_inherits(a,t);var e=_createSuper(a);function a(t,i,n,c,r,s,l){var u;return _classCallCheck(this,a),(u=e.call(this,t)).indexService=t,u.contactservice=i,u.msgBox=n,u.msg=c,u.flowservice=r,u.projectservice=s,u.rolediscountservice=l,u.contactChange=new o.n,u.contactdata=[],u.allcontactdata=[],u.contactcolumns=[{id:"index",label:"\u5e8f\u53f7",width:80,type:"index"},{id:"actions",label:"\u64cd\u4f5c",width:180},{id:"id",label:"\u5408\u540c\u7f16\u53f7",width:80,sort:!0},{id:"totalfee",label:"\u603b\u8d39\u7528",width:80,sort:!0},{id:"testfee",label:"\u68c0\u6d4b\u8d39",width:80,sort:!0},{id:"standardfee",label:"\u6807\u51c6\u68c0\u6d4b\u8d39",width:100,sort:!0},{id:"discount",label:"\u6298\u6263",width:80},{id:"ugency",label:"\u52a0\u6025\u7c7b\u578b",width:80,sort:!0},{id:"signdate",label:"\u7b7e\u8ba2\u65e5\u671f",width:100,sort:!0}],u.activeid="",u.contactindex=1,u.contactsize=20,u.contacttotal=0,u.contactquery={filter:[]},u.auth={},u}return _createClass(a,[{key:"ngOnInit",value:function(){}},{key:"setActive",value:function(t){this.activeid=t}},{key:"cotactaction",value:function(t,e){var a=this;switch(t){case"add":if(null==this.customer||null==this.customer.id||""==this.customer.id)this.msgBox.alert("\u8fd8\u6ca1\u6709\u9009\u62e9\u5ba2\u6237");else{var i=p().format("YYYY-MM-DD");this.currentContact={id:b.a.GetRandomStr(!0,5,16),customerid:this.customer.id,signdate:i},console.log(i),this.currentContact.userid=this.indexService.auth.user.id+"",this.contactservice.post(this.currentContact).subscribe((function(t){a.currentContact=t,a.contactdata.push(t),a.contactdata=a.contactdata.map((function(t){return t})),a.contacttotal=a.contactdata.length,a.contacttable.activatedRow=t,null!=a.contactchange&&a.contactChange.emit(t)}))}break;case"delete":this.msgBox.confirm({title:"\u63d0\u793a",content:"\u6b64\u64cd\u4f5c\u5c06\u6c38\u4e45\u5220\u9664\u6b64\u6761\u6570\u636e\uff1a".concat(e.id,"\uff0c\u662f\u5426\u7ee7\u7eed\uff1f"),type:"warning",callback:function(t){"confirm"===t&&a.contactservice.delete(e.id||"").subscribe((function(t){var i=b.a.setafterdelete(e.id,a.contactdata);a.msg.success("\u5220\u9664\u6210\u529f"),a.contactdata=a.contactdata.map((function(t){return t})),a.contacttotal=a.contactdata.length,i>0?a.currentContact=a.contactdata[i-1]:0==i&&a.contacttotal>0&&(a.currentContact=a.contactdata[i+1]),a.contacttable.activatedRow=a.currentContact,null!=a.contactchange&&a.contactChange.emit(a.currentContact)}))}});break;case"submit":var n=e.contactcustomers.find((function(t){return 1==t.customertype}));null!=n&&null!=n.area&&this.rolediscountservice.getrolediscountvaluebyid(n.area,this.indexService.auth.user.roles).subscribe((function(t){a.flowservice.startflow({customername:n.customername,userid:a.indexService.auth.user.id+"",username:a.indexService.auth.user.name,contactid:e.id,instanceKey:"LimsTestProcess"}).subscribe((function(i){a.projectservice.getprojects(e.id).subscribe((function(n){a.flowservice.excutetask(i.TaskId,{userid:a.indexService.auth.user.id+"",username:a.indexService.auth.user.name,contactid:e.id,limitdiscount:t.discount,ugencytype:e.service.id}).subscribe((function(t){a.msg.success("\u63d0\u4ea4\u6210\u529f"),a.currentContact.contactstatus=1}))}))}))}))}}},{key:"getcontactdata",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.contactquery={filter:[{field:"id",value:""+this.customer.id,operation:"="},{field:"userid",value:""+this.indexService.auth.user.id,operation:"="}]},this.contactservice.getList(this.contactindex,this.contactsize,this.contactquery).subscribe((function(a){var i;if(i=[a.list,Number(a.total)],t.contactdata=i[0],t.contacttotal=i[1],console.log(a.list),t.contactdata.length>0){if(e)if(""!=t.activeid){var n=t.contactdata.findIndex((function(e){return e.id==t.activeid}));t.currentContact=-1!=n?t.contactdata[n]:t.contactdata[0]}else t.currentContact=t.contactdata[0];t.contacttable.activatedRow=t.currentContact}t.contactChange.emit(t.currentContact)}))}},{key:"refreshdata",value:function(){this.contactdata=_toConsumableArray(this.contactdata)}},{key:"contactchange",value:function(t){this.currentContact=t,this.contactChange.emit(t)}},{key:"copaycotactaction",value:function(){var t=this;null!=this.currentContact&&null!=this.currentContact&&null!=this.currentContact.id&&this.contactservice.getcontactproject(this.currentContact.id+"").subscribe((function(e){var a,i=e.contact;i.id=b.a.GetRandomStr(!0,6,10),i.contactstatus=0,null===(a=i.contactcustomers)||void 0===a||a.map((function(t){t.contactid=i.id+""}));var n=e.projects,c=1;n.map((function(t){var e;t.contactid=i.id+"",t.id=b.a.JsNewGuid(),t.projectnumber="\u4e34\u65f6\u9879\u76ee"+c,c+=1,t.projectstatus=0,null===(e=t.samples)||void 0===e||e.map((function(e){var a;e.projectid=t.id+"",e.id=b.a.JsNewGuid(),null===(a=e.testprojects)||void 0===a||a.map((function(t){t.sampleid=e.id+""}))}))})),t.contactservice.addcontactproject({contact:i,projects:n}).subscribe((function(){t.currentContact=i,t.contactdata.push(i),t.contactdata=_toConsumableArray(t.contactdata),null!=t.contactChange&&t.contactChange.emit(i)}))}))}},{key:"contactIndexChange",value:function(t){this.contactindex=t}},{key:"submitdisable",value:function(t){return 1==t.contactstatus}}]),a}(_.a)).\u0275fac=function(t){return new(t||P)(o.Ib(u.a),o.Ib(d.a),o.Ib(v.c),o.Ib(g.c),o.Ib(h.a),o.Ib(f.a),o.Ib(m.a))},P.\u0275cmp=o.Cb({type:P,selectors:[["app-contact"]],viewQuery:function(t,e){var a;1&t&&o.Cc(y,!0),2&t&&o.jc(a=o.Wb())&&(e.contacttable=a.first)},inputs:{auth:"auth"},outputs:{contactChange:"contactChange"},features:[o.vb],decls:13,vars:12,consts:[["span","3"],["icon","fto-plus","plain","",3,"disabled","click"],["virtualScroll","","loading","",3,"data","columns","index","size","total","query","adaptionHeight","bodyColumnTpl","indexChange","sizeChange","activatedRowChange"],["contacttable",""],["contactTpl",""],[1,"au-table-actions"],["icon","fto-trash-2","plain","",3,"disabled","click"],["icon","fto-check","type","success","plain","",3,"disabled","click"]],template:function(t,e){if(1&t&&(o.Ob(0,"x-row"),o.Ob(1,"x-col",0),o.Ob(2,"x-button",1),o.Vb("click",(function(){return e.auth.add&&e.cotactaction("add")})),o.xc(3," \u65b0\u589e "),o.Nb(),o.Nb(),o.Ob(4,"x-col",0),o.Ob(5,"x-button",1),o.Vb("click",(function(){return e.auth.add&&e.copaycotactaction()})),o.xc(6," \u590d\u5236\u65b0\u589e "),o.Nb(),o.Nb(),o.Nb(),o.Ob(7,"x-row"),o.Ob(8,"x-col"),o.Ob(9,"x-table",2,3),o.Vb("indexChange",(function(t){return e.contactindex=t}))("sizeChange",(function(t){return e.contactsize=t}))("activatedRowChange",(function(t){return e.contactchange(t)}))("indexChange",(function(t){return e.contactIndexChange(t)})),o.Nb(),o.Nb(),o.Nb(),o.vc(11,M,5,2,"ng-template",null,4,o.wc)),2&t){var a=o.kc(12);o.yb(2),o.ec("disabled",!e.auth.add),o.yb(3),o.ec("disabled",!e.auth.add),o.yb(4),o.ec("data",e.contactdata)("columns",e.contactcolumns)("index",e.contactindex)("size",e.contactsize)("total",e.contacttotal)("query",e.contactquery)("adaptionHeight",470)("bodyColumnTpl",o.gc(10,w,a))}},directives:[O.c,O.a,E.a,C.a],styles:[""]}),P),j=a("M3sX"),A=a("bRdP"),T=a("NtM8"),R=((D=function(t){_inherits(a,t);var e=_createSuper(a);function a(t){var i;return _classCallCheck(this,a),(i=e.call(this,t,{controller:{name:"customers",servicetype:"businessprocess"}})).http=t,i}return a}(A.a)).\u0275fac=function(t){return new(t||D)(o.Sb(T.a))},D.\u0275prov=o.Eb({token:D,factory:D.\u0275fac,providedIn:"root"}),D),B=a("lJxs"),L=((x=function(t){_inherits(a,t);var e=_createSuper(a);function a(){var t;return _classCallCheck(this,a),(t=e.apply(this,arguments)).users=[{id:1,label:"\u5317\u4eac\u5e02"},{id:2,label:"\u4e0a\u6d77\u5e02"},{id:3,label:"\u5929\u6d25\u5e02"},{id:4,label:"\u91cd\u5e86\u5e02"},{id:5,label:"\u5e7f\u4e1c\u7701"},{id:6,label:"\u6c5f\u82cf\u7701"},{id:7,label:"\u5c71\u4e1c\u7701"},{id:8,label:"\u6d59\u6c5f\u7701"},{id:9,label:"\u6cb3\u5357\u7701"},{id:10,label:"\u53f0\u6e7e\u7701"},{id:11,label:"\u6e56\u5317\u7701"},{id:12,label:"\u6e56\u5357\u7701"},{id:13,label:"\u56db\u5ddd\u7701"},{id:14,label:"\u7518\u8083\u7701"},{id:15,label:"\u9655\u897f\u7701"},{id:16,label:"\u5c71\u897f\u7701"},{id:17,label:"\u6c5f\u897f\u7701"},{id:18,label:"\u798f\u5efa\u7701"},{id:19,label:"\u8d35\u5dde\u7701"},{id:20,label:"\u8fbd\u5b81\u7701"},{id:21,label:"\u5409\u6797\u7701"},{id:22,label:"\u9ed1\u9f99\u6c5f\u7701"},{id:23,label:"\u5b89\u5fbd\u7701"},{id:24,label:"\u5185\u8499\u53e4\u81ea\u6cbb\u533a"},{id:25,label:"\u65b0\u7586\u7ef4\u543e\u5c14\u81ea\u6cbb\u533a"},{id:26,label:"\u897f\u85cf\u81ea\u6cbb\u533a"},{id:27,label:"\u6d77\u5357\u7701"},{id:28,label:"\u5b81\u590f\u56de\u65cf\u81ea\u6cbb\u533a"},{id:29,label:"\u5e7f\u897f\u58ee\u65cf\u81ea\u6cbb\u533a"},{id:30,label:"\u6cb3\u5317\u7701"},{id:31,label:"\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a"},{id:32,label:"\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a"}],t}return _createClass(a,[{key:"getList",value:function(t,e,a){var i=this;return new r.a((function(n){var r=[];r=i.setFilter(i.users,null==a?void 0:a.filter),(null==a?void 0:a.group)&&(r=i.setGroup(r,a.group)),(null==a?void 0:a.sort)&&(r=i.setSort(r,a.sort));var s=Object(c.J)(r,e);n.next(t<=s.length?{total:r.length,list:s[t-1]}:{total:r.length,list:[]}),n.complete()}))}},{key:"getidbyname",value:function(t){return this.users.find((function(e){return e.label==t}))}},{key:"get",value:function(t){return new r.a}},{key:"post",value:function(t){return new r.a}},{key:"put",value:function(t){return new r.a}},{key:"delete",value:function(t){return new r.a}},{key:"setFilter",value:function(t,e){var a=t;return e&&e.length>0&&e.forEach((function(t){a=a.filter((function(e){return e[t.field].indexOf(t.value)>=0}))})),a}},{key:"setGroup",value:function(t,e){return Object(s.map)(Object(c.L)(t,e),(function(t,a){var i={id:a,count:t.length};return i[e]=a,i}))}},{key:"setSort",value:function(t,e){return Object(s.orderBy)(t,Object(s.map)(e,(function(t){return t.field})),Object(s.map)(e,(function(t){return t.value})))}}]),a}(c.z)).\u0275fac=function(t){return W(t||x)},x.\u0275prov=o.Eb({token:x,factory:x.\u0275fac}),x),W=o.Qb(L),N=a("1uEr"),K=a("ZQZ3"),U=a("MOn6"),q=a("hMyc"),V=["form"],z=((I=function(){function t(e,a,i,n){var c=this;_classCallCheck(this,t),this.message=e,this.cdr=a,this.service=i,this.provservice=n,this.config={labelWidth:"6rem"},this.functiontype=1,this.sendmessage=new o.n,this.controls=[{control:"input",id:"customername",label:"\u5ba2\u6237\u540d\u79f0",required:!0,maxlength:50,pattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]/},{control:"input",id:"functiontype",label:"",hidden:!0},{control:"input",id:"customeraddress",label:"\u5355\u4f4d\u5730\u5740",required:!0,maxlength:50,pattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]/},{control:"find",id:"customertype",label:"\u5ba2\u6237\u7c7b\u578b",hidden:!1,required:!1,multiple:!1,treeData:function(){return[{id:"1",label:"\u5927\u5ba2\u6237"},{id:"2",label:"\u666e\u901a\u5ba2\u6237"}]}},{control:"find",id:"area",label:"\u7701\u4efd",required:!1,hidden:!0,multiple:!1,treeData:function(){return c.provservice.getList(1,50).pipe(Object(B.a)((function(t){return t.list})))}},{control:"input",id:"contacter",label:"\u8054\u7cfb\u4eba\u59d3\u540d",required:!1},{control:"input",id:"phone",label:"\u8054\u7cfb\u4eba\u7535\u8bdd",required:!1},{control:"input",id:"fax",label:"\u4f20\u771f"},{control:"input",id:"email",label:"\u90ae\u7bb1"},{control:"input",id:"postcode",label:"\u90ae\u7f16"}]}return _createClass(t,[{key:"ngDoCheck",value:function(){}},{key:"setinitcustomer",value:function(t){var e,a,i,n;this.id=t.id+"",this.form.formGroup.setValue({customername:t.customername,contacter:t.contacter,customeraddress:t.customeraddress,phone:t.phone,email:t.email,functiontype:t.functiontype,customertype:{id:null===(e=t.customertype)||void 0===e?void 0:e.id,label:null===(a=t.customertype)||void 0===a?void 0:a.customertype},fax:t.fax,postcode:t.postcode,area:null==t.area?1:this.provservice.getidbyname(t.area)}),this.selectedprovince=this.provservice.getidbyname(t.area+""),this.selected={id:null==(null===(i=t.customertype)||void 0===i?void 0:i.id)?2:t.customertype.id,label:null==(null===(n=t.customertype)||void 0===n?void 0:n.customertype)?"\u666e\u901a\u5ba2\u6237":t.customertype.customertype},this.selected.id&&(this.controls.find((function(t){return"customertype"===t.id})).value=[this.selected]),null!=this.selectedprovince&&this.selectedprovince.id&&(this.controls.find((function(t){return"area"===t.id})).value=[this.selectedprovince])}},{key:"setcurrent",value:function(t,e,a){this.userid=e,this.currentcustomer=a,this.type=t,null!=a?this.setinitcustomer(a):this.form.formGroup.setValue({customername:"",contacter:"",customeraddress:"",phone:"",email:"",customertype:{id:2,label:"\u666e\u901a\u5ba2\u6237"},functiontype:this.functiontype,fax:"",area:{id:1,label:"\u5317\u4eac"},postcode:""})}},{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){var t=this;switch(this.cdr.detectChanges(),this.functiontype){case 1:this.controls=[{control:"input",id:"customername",label:"\u5ba2\u6237\u540d\u79f0",required:!0,maxlength:50,pattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]/},{control:"input",id:"functiontype",label:"",hidden:!0},{control:"input",id:"customeraddress",label:"\u5355\u4f4d\u5730\u5740",required:!0,maxlength:50,pattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]/},{control:"find",id:"customertype",label:"\u5ba2\u6237\u7c7b\u578b",hidden:!1,required:!1,multiple:!1,treeData:function(){return[{id:"1",label:"\u5927\u5ba2\u6237"},{id:"2",label:"\u666e\u901a\u5ba2\u6237"}]}},{control:"find",id:"area",label:"\u7701\u4efd",required:!1,hidden:!1,multiple:!1,treeData:function(){return t.provservice.getList(1,50).pipe(Object(B.a)((function(t){return t.list})))}},{control:"input",id:"contacter",label:"\u8054\u7cfb\u4eba\u59d3\u540d",required:!0},{control:"input",id:"phone",label:"\u8054\u7cfb\u4eba\u7535\u8bdd",required:!0},{control:"input",id:"fax",label:"\u4f20\u771f"},{control:"input",id:"email",label:"\u90ae\u7bb1"},{control:"input",id:"postcode",label:"\u90ae\u7f16"}];break;case 2:this.controls=[{control:"input",id:"customername",label:"\u5ba2\u6237\u540d\u79f0",required:!0,maxlength:50,pattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]/},{control:"input",id:"functiontype",label:"",hidden:!0},{control:"input",id:"customeraddress",label:"\u5355\u4f4d\u5730\u5740",required:!1,maxlength:50,pattern:/[\u4e00-\u9fa5_a-zA-Z0-9_]/},{control:"find",id:"customertype",label:"\u5ba2\u6237\u7c7b\u578b",required:!1,hidden:!0,multiple:!1,treeData:function(){return[{id:"1",label:"\u5927\u5ba2\u6237"},{id:"2",label:"\u666e\u901a\u5ba2\u6237"}]}},{control:"find",id:"area",label:"\u7701\u4efd",hidden:!0,required:!1,multiple:!1,treeData:function(){return t.provservice.getList(1,50).pipe(Object(B.a)((function(t){return t.list})))}},{control:"input",id:"contacter",label:"\u8054\u7cfb\u4eba\u59d3\u540d",required:!1},{control:"input",id:"phone",label:"\u8054\u7cfb\u4eba\u7535\u8bdd",required:!1},{control:"input",id:"fax",label:"\u4f20\u771f"},{control:"input",id:"email",label:"\u90ae\u7bb1"},{control:"input",id:"postcode",label:"\u90ae\u7f16"}]}}},{key:"action",value:function(t){var e=this;switch(t){case"info":case"edit":break;case"save":this.form.formGroup.value.area=this.form.formGroup.value.area.label,this.form.formGroup.value.userid=this.userid,"add"===this.type?this.service.post(this.form.formGroup.value).subscribe((function(t){e.currentcustomer=t,e.message.success("\u65b0\u589e\u6210\u529f\uff01"),e.sendmessage.emit("add")})):"edit"===this.type&&(this.form.formGroup.value.id=this.id,this.currentcustomer=this.form.formGroup.value,this.service.put(this.form.formGroup.value).subscribe((function(t){e.message.success("\u4fee\u6539\u6210\u529f\uff01"),e.sendmessage.emit("edit")})));break;case"cancel":this.sendmessage.emit("cancel")}}},{key:"formInvalid",get:function(){var t,e;return null===(e=null===(t=this.form)||void 0===t?void 0:t.formGroup)||void 0===e?void 0:e.invalid}},{key:"disabled",get:function(){return"info"===this.type}}]),t}()).\u0275fac=function(t){return new(t||I)(o.Ib(g.c),o.Ib(o.h),o.Ib(R),o.Ib(L))},I.\u0275cmp=o.Cb({type:I,selectors:[["app-addcustomers"]],viewQuery:function(t,e){var a;1&t&&o.Cc(V,!0),2&t&&o.jc(a=o.Wb())&&(e.form=a.first)},inputs:{functiontype:"functiontype"},outputs:{sendmessage:"sendmessage"},features:[o.xb([L])],decls:9,vars:5,consts:[[1,"au-inner","au-column"],["au-adaption","","direction","row","labelSuffix",":","labelWidth","6rem","width","24rem","labelAlign","end","span","20","space","2",1,"au-panel","au-overflow-auto",3,"outerHeight","disabled","controls"],["form",""],["bottom",""],[3,"space"],["icon","fto-chevron-left",3,"click"],["icon","fto-save","type","primary",3,"disabled","click"]],template:function(t,e){1&t&&(o.Ob(0,"x-inner",0),o.Jb(1,"x-form",1,2),o.Ob(3,"au-tool",3),o.Ob(4,"x-buttons",4),o.Ob(5,"x-button",5),o.Vb("click",(function(){return e.action("cancel")})),o.xc(6,"\u8fd4\u56de"),o.Nb(),o.Ob(7,"x-button",6),o.Vb("click",(function(){return!e.formInvalid&&e.action("save")})),o.xc(8," \u4fdd\u5b58 "),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&t&&(o.yb(1),o.ec("outerHeight",100)("disabled",e.disabled)("controls",e.controls),o.yb(3),o.ec("space",.5),o.yb(3),o.ec("disabled",e.formInvalid||e.disabled))},directives:[N.a,K.b,U.a,q.a,E.c,E.a],styles:[""]}),I),S=a("l5Yv"),J=a("P0lq"),G=a("kXfN"),Y=["customtable"],$=["customercomponent"],H=["searchcustom"];function Z(t,e){if(1&t){var a=o.Pb();o.Ob(0,"div",15),o.Ob(1,"x-link",16),o.Vb("click",(function(){o.mc(a);var t=e.$row;return o.Yb().action("info",t)})),o.Nb(),o.Ob(2,"x-link",17),o.Vb("click",(function(){o.mc(a);var t=e.$row;return o.Yb().action("edit",t)})),o.Nb(),o.Ob(3,"x-link",18),o.Vb("click",(function(){o.mc(a);var t=e.$row;return o.Yb().action("delete",t)})),o.Nb(),o.Nb()}}var F,Q=function(t){return{actions:t}},X=((F=function(){function t(e,a,i,n,c){_classCallCheck(this,t),this.service=e,this.cdr=a,this.indexService=i,this.msgBox=n,this.msg=c,this.ChangeCustomer=new o.n,this.hidebutton="inline",this.customeradaption=500,this.auth={},this.multiple=!1,this.seldata=[],this.data=[],this.alldata=[],this.columns=[{id:"index",label:"\u5e8f\u53f7",width:100,left:0,type:"index"},{id:"actions",label:"\u64cd\u4f5c",width:100,left:80},{id:"customername",label:"\u5ba2\u6237\u540d\u79f0",width:200,sort:!0},{id:"area",label:"\u533a\u57df",width:300,sort:!0},{id:"customeraddress",label:"\u5355\u4f4d\u5730\u5740",width:300,sort:!0},{id:"email",label:"\u90ae\u7bb1",width:300},{id:"phone",label:"\u7535\u8bdd",width:300},{id:"contacter",label:"\u8054\u7cfb\u4eba",width:300,flex:1,sort:!0},{id:"postcode",label:"\u90ae\u7f16",width:300,flex:1},{id:"remark",label:"\u5907\u6ce8",width:700,flex:1}],this.size=50,this.index=1,this.query={filter:[]},this.total=0,this.functiontype=1,this.visible=!1}return _createClass(t,[{key:"ngAfterViewInit",value:function(){this.getalldata(this.indexService.auth.user.id+""),this.getData()}},{key:"setActive",value:function(t){console.log(this.functiontype);var e=this.data.findIndex((function(e){return e.id==t}));-1!=e&&(this.customtable.activatedRow=this.data[e],this.currentCustomer=this.data[e])}},{key:"customerchange",value:function(t){if(this.currentCustomer=t,null!=this.ChangeCustomer&&this.ChangeCustomer.emit(t),this.multiple){var e=this.seldata.findIndex((function(e){return e.id==t.id}));-1==e&&t.sel?this.seldata.push(t):!t.sel&&e>=0&&this.seldata.splice(e,1)}}},{key:"setselect",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.getalldata(this.indexService.auth.user.id+""),this.getData(),console.log(this.data),this.multiple=e,e?this.columns=[{id:"sel",label:"\u9009\u62e9",width:100,left:0,type:"checkbox"},{id:"customername",label:"\u5ba2\u6237\u540d\u79f0",width:200,sort:!0},{id:"area",label:"\u533a\u57df",width:300,sort:!0},{id:"customeraddress",label:"\u5355\u4f4d\u5730\u5740",width:300,sort:!0},{id:"email",label:"\u90ae\u7bb1",width:300},{id:"phone",label:"\u7535\u8bdd",width:300},{id:"contacter",label:"\u8054\u7cfb\u4eba",width:300,flex:1,sort:!0},{id:"postcode",label:"\u90ae\u7f16",width:300,flex:1},{id:"remark",label:"\u5907\u6ce8",width:700,flex:1}]:(this.columns=[{id:"index",label:"\u5e8f\u53f7",width:100,left:0,type:"index"},{id:"actions",label:"\u64cd\u4f5c",width:100,left:80},{id:"customername",label:"\u5ba2\u6237\u540d\u79f0",width:200,sort:!0},{id:"area",label:"\u533a\u57df",width:300,sort:!0},{id:"customeraddress",label:"\u5355\u4f4d\u5730\u5740",width:300,sort:!0},{id:"email",label:"\u90ae\u7bb1",width:300},{id:"phone",label:"\u7535\u8bdd",width:300},{id:"contacter",label:"\u8054\u7cfb\u4eba",width:300,flex:1,sort:!0},{id:"postcode",label:"\u90ae\u7f16",width:300,flex:1},{id:"remark",label:"\u5907\u6ce8",width:700,flex:1}],this.seldata.length>0&&(this.customtable.activatedRow=this.data.find((function(e){return e.id==t.seldata[0].id})))),this.data.map((function(e){e.sel=-1!=t.seldata.findIndex((function(t){return t.id==e.id}))}))}},{key:"searchkeydown",value:function(){""!=this.searchcustom.value?(this.query.filterLogic="or",this.query.filter=[{field:"customername",value:this.searchcustom.value,operation:"%"},{field:"customeraddress",value:this.searchcustom.value,operation:"%"}]):(this.query.filter=[],this.total=this.alldata.length),this.getData()}},{key:"ngOnInit",value:function(){}},{key:"getData",value:function(){var t=this;this.service.gethandledata(this.alldata,this.index,this.size,this.query).subscribe((function(e){var a;if(a=[e.list,Number(e.total)],t.data=a[0],t.total=a[1],t.total>0){if(t.multiple&&t.data.map((function(e){-1!=t.seldata.findIndex((function(t){return t.id==e.id}))&&(e.sel=!0)})),0==t.seldata.length)t.currentCustomer=t.data[0],t.customtable.activatedRow=t.data[0];else{var i=t.data.findIndex((function(e){return e.id==t.seldata[0].id}));-1!=i&&(t.currentCustomer=t.data[i],t.customtable.activatedRow=t.data[i])}null!=t.ChangeCustomer&&t.ChangeCustomer.emit(t.data[0])}}))}},{key:"getalldata",value:function(t){var e=this;this.query={filter:[{field:"userid",value:t,operation:"="}]},this.service.getList(this.index,this.size,this.query).subscribe((function(t){var a,i;1==e.functiontype?(e.alldata=[],null===(i=t.list)||void 0===i||i.map((function(t){1==t.functiontype&&e.alldata.push(t)})),e.total=e.alldata.length):(a=[t.list,Number(t.total)],e.alldata=a[0],e.total=a[1]),e.getData(),e.cdr.detectChanges()}))}},{key:"indexChange",value:function(t){this.index=t,this.getData()}},{key:"sortChange",value:function(t){this.query.sort=t,this.getData()}},{key:"handlecustomerchange",value:function(t){var e=this;if(this.index=1,this.size=50,this.total=0,null!=this.AddcustomersComponent.currentcustomer)switch(this.currentCustomer=this.AddcustomersComponent.currentcustomer,t){case"add":this.data.push(this.currentCustomer),this.data=this.data.map((function(t){return t})),this.customtable.activatedRow=this.currentCustomer,null!=this.ChangeCustomer&&this.ChangeCustomer.emit(this.currentCustomer);break;case"edit":this.data=this.data.map((function(t){return t.id==e.currentCustomer.id?e.currentCustomer:t}))}this.visible=!1}},{key:"action",value:function(t,e){var a=this;"delete"!=t?(this.AddcustomersComponent.setcurrent(t,this.indexService.auth.user.id+"",e),this.visible=!0):this.msgBox.confirm({title:"\u63d0\u793a",content:"\u6b64\u64cd\u4f5c\u5c06\u6c38\u4e45\u5220\u9664\u6b64\u6761\u6570\u636e\uff1a".concat(e.customername,"\uff0c\u662f\u5426\u7ee7\u7eed\uff1f"),type:"warning",callback:function(t){"confirm"===t&&a.service.delete(e.id).subscribe((function(t){var i=b.a.setafterdelete(e.id,a.data);a.data=a.data.map((function(t){return t})),a.total=a.data.length,a.msg.success("\u5220\u9664\u6210\u529f"),i>0&&(a.currentCustomer=a.data[i-1]),a.customtable.activatedRow=a.currentCustomer,null!=a.ChangeCustomer&&a.ChangeCustomer.emit(a.currentCustomer)}))}})}}]),t}()).\u0275fac=function(t){return new(t||F)(o.Ib(R),o.Ib(o.h),o.Ib(u.a),o.Ib(v.c),o.Ib(g.c))},F.\u0275cmp=o.Cb({type:F,selectors:[["app-customer"]],viewQuery:function(t,e){var a;1&t&&(o.Cc(Y,!0),o.Cc($,!0),o.Cc(H,!0)),2&t&&(o.jc(a=o.Wb())&&(e.customtable=a.first),o.jc(a=o.Wb())&&(e.AddcustomersComponent=a.first),o.jc(a=o.Wb())&&(e.searchcustom=a.first))},inputs:{hidebutton:"hidebutton",customeradaption:"customeradaption",auth:"auth",functiontype:"functiontype"},outputs:{ChangeCustomer:"ChangeCustomer"},decls:19,vars:18,consts:[["width","30%","height","70%",3,"visible","showConfirm","showCancel","backdropClose","hasBackdrop","visibleChange"],["dialogcustomer",""],[2,"width","100%","height","100%",3,"functiontype","sendmessage"],["customercomponent",""],["span","3"],["id","buttonpanel"],["icon","fto-plus","plain","",3,"click"],["span","4"],["placeholder","\u8bf7\u8f93\u5165\u5185\u5bb9","icon","ado-search",3,"keyup"],["searchcustom",""],["span","24"],["customerd",""],["virtualScroll","","loading","",3,"columns","data","index","size","query","total","adaptionHeight","bodyColumnTpl","indexChange","sizeChange","queryChange","activatedRowChange","sortChange"],["customtable",""],["actionsTpl",""],[1,"au-table-actions"],["icon","fto-eye","title","\u67e5\u770b",3,"click"],["icon","fto-edit","title","\u4fee\u6539",3,"click"],["icon","fto-trash-2","title","\u5220\u9664",3,"click"]],template:function(t,e){if(1&t&&(o.Ob(0,"x-dialog",0,1),o.Vb("visibleChange",(function(t){return e.visible=t})),o.Ob(2,"app-addcustomers",2,3),o.Vb("sendmessage",(function(t){return e.handlecustomerchange(t)})),o.Nb(),o.Nb(),o.Ob(4,"x-row"),o.Ob(5,"x-col",4),o.Ob(6,"div",5),o.Ob(7,"x-button",6),o.Vb("click",(function(){return e.action("add")})),o.xc(8," \u65b0\u589e "),o.Nb(),o.Nb(),o.Nb(),o.Ob(9,"x-col",7),o.Ob(10,"x-input",8,9),o.Vb("keyup",(function(){return e.searchkeydown()})),o.Nb(),o.Nb(),o.Nb(),o.Ob(12,"x-row"),o.Ob(13,"x-col",10,11),o.Ob(15,"x-table",12,13),o.Vb("indexChange",(function(t){return e.index=t}))("sizeChange",(function(t){return e.size=t}))("queryChange",(function(t){return e.query=t}))("activatedRowChange",(function(t){return e.customerchange(t)}))("indexChange",(function(t){return e.indexChange(t)}))("sortChange",(function(t){return e.sortChange(t)})),o.Nb(),o.Nb(),o.Nb(),o.vc(17,Z,4,0,"ng-template",null,14,o.wc)),2&t){var a=o.kc(18);o.ec("visible",e.visible)("showConfirm",!1)("showCancel",!1)("backdropClose",!1)("hasBackdrop",!1),o.yb(2),o.ec("functiontype",e.functiontype),o.yb(4),o.sc("display",e.hidebutton),o.yb(9),o.ec("columns",e.columns)("data",e.data)("index",e.index)("size",e.size)("query",e.query)("total",e.total)("adaptionHeight",e.customeradaption)("bodyColumnTpl",o.gc(16,Q,a))}},directives:[S.a,z,O.c,O.a,E.a,J.a,C.a,G.a],styles:[""]}),F),tt=a("bwiJ"),et=["samplecomponent"],at=["sampletable"];function it(t,e){if(1&t){var a=o.Pb();o.Ob(0,"div",9),o.Ob(1,"x-link",10),o.Vb("click",(function(){o.mc(a);var t=e.$row;return o.Yb().sampleaction("info",t)})),o.Nb(),o.Ob(2,"x-link",11),o.Vb("click",(function(){o.mc(a);var t=e.$row,i=o.Yb();return!i.disabled&&i.sampleaction("edit",t)})),o.Nb(),o.Ob(3,"x-link",12),o.Vb("click",(function(){o.mc(a);var t=e.$row,i=o.Yb();return!i.disabled&&i.sampleaction("delete",t)})),o.Nb(),o.Nb()}if(2&t){var i=o.Yb();o.yb(2),o.ec("disabled",i.disabled),o.yb(1),o.ec("disabled",i.disabled)}}var nt,ct=function(t){return{actions:t}},rt=((nt=function(t){_inherits(a,t);var e=_createSuper(a);function a(t,i,n){var c;return _classCallCheck(this,a),(c=e.call(this,t)).indexService=t,c.msgBox=i,c.msg=n,c.samplevisible=!1,c.samplesize=20,c.sampleindex=1,c.samplequery={filter:[]},c.sampletotal=0,c.samplecolumns=[{id:"index",label:"\u5e8f\u53f7",width:100,left:0,type:"index"},{id:"actions",label:"\u64cd\u4f5c",width:100,left:100},{id:"samplename",label:"\u6837\u54c1\u540d\u79f0",width:200,sort:!0},{id:"price",label:"\u6837\u54c1\u4ef7\u683c",width:200,sort:!0},{id:"testproject",label:"\u68c0\u6d4b\u9879\u76ee",width:200,sort:!0},{id:"methodname",label:"\u68c0\u6d4b\u65b9\u6cd5",width:200,sort:!0}],c.domaindisabled=!1,c}return _createClass(a,[{key:"ngDoCheck",value:function(){}},{key:"ngOnInit",value:function(){this.currentsample=this.getnewsample()}},{key:"getnewsample",value:function(){return{projectid:null!=this.currentproject?this.currentproject.id:void 0,id:b.a.JsNewGuid(),samplename:"",samplequality:"1",price:0,externprice:0,testprojects:[]}}},{key:"setcopy",value:function(t){var e=b.a.deepClone(t);e.id=b.a.JsNewGuid(),this.sampledata.push(e),this.sampledata=_toConsumableArray(this.sampledata)}},{key:"sampleaction",value:function(t,e){var a=this;if("copyadd"==t)return console.log(this.currentsample),void(null!=this.sampletable.activatedRow?this.setcopy(this.sampletable.activatedRow):this.msgBox.alert("\u6ca1\u6709\u590d\u5236\u5bf9\u8c61"));if(this.samplecomponent.type=t,"delete"!=t){var i=-1;null==e?(this.currentsample=this.getnewsample(),this.samplecomponent.currentsample=this.currentsample):(this.currentsample=e,i=this.sampledata.findIndex((function(t){return t.id==e.id})),this.samplecomponent.currentsample=e),0==this.currentproject.mergereport&&this.sampledata.length>0&&0!=i?(this.domaindisabled=!0,this.currentsample.domainid=this.sampledata[0].domainid):this.domaindisabled=!1,this.samplecomponent.getproject(),this.samplevisible=!0}else this.msgBox.confirm({title:"\u63d0\u793a",content:"\u6b64\u64cd\u4f5c\u5c06\u6c38\u4e45\u5220\u9664\u6b64\u6761\u6570\u636e\uff1a".concat(null==e?void 0:e.samplename,"\uff0c\u662f\u5426\u7ee7\u7eed\uff1f"),type:"warning",callback:function(t){if("confirm"===t&&null!=e){var i=b.a.setafterdelete(e.id+"",a.sampledata);a.sampledata=_toConsumableArray(a.sampledata),a.sampletotal=a.sampledata.length,i>0&&(a.currentsample=a.sampledata[i-1],a.sampletable.activatedRow=a.currentsample)}}})}},{key:"activechange",value:function(t){this.currentsample=t}},{key:"setsampledata",value:function(t){this.sampledata=[],this.sampledata=t,this.currentsample={},this.sampletable.activatedRow=void 0,this.sampledata.length>0&&(this.currentsample=this.sampledata[0],this.sampletable.activatedRow=this.currentsample)}},{key:"handlesamplechange",value:function(t){var e=this;switch(null!=this.samplecomponent.currentsample&&(this.currentsample=this.samplecomponent.currentsample),t){case"add":this.sampledata.push(this.currentsample),this.sampledata=_toConsumableArray(this.sampledata);break;case"edit":var a=this.sampledata[0].domainid;this.sampledata=this.sampledata.map((function(t){return 0==e.currentproject.mergereport&&(t.domainid=a),t.id==e.currentsample.id?e.currentsample:t}))}this.samplevisible=!1}},{key:"disabled",get:function(){return"info"==this.type}}]),a}(_.a)).\u0275fac=function(t){return new(t||nt)(o.Ib(u.a),o.Ib(v.c),o.Ib(g.c))},nt.\u0275cmp=o.Cb({type:nt,selectors:[["app-sample"]],viewQuery:function(t,e){var a;1&t&&(o.Cc(et,!0),o.Cc(at,!0)),2&t&&(o.jc(a=o.Wb())&&(e.samplecomponent=a.first),o.jc(a=o.Wb())&&(e.sampletable=a.first))},features:[o.vb],decls:17,vars:17,consts:[["width","50%","height","60%","placement","top",3,"visible","showConfirm","showCancel","backdropClose","hasBackdrop","visibleChange"],["dialogsample",""],[2,"width","100%","height","100%",3,"currentsample","domaindisabled","sendaddsample"],["samplecomponent",""],["span","2"],["icon","fto-plus","plain","","size","small","type","primary",3,"disabled","click"],["adaptionHeight","520","virtualScroll","","loading","",3,"data","columns","index","size","total","bodyColumnTpl","indexChange","sizeChange","activatedRowChange"],["sampletable",""],["sampleTpl",""],[1,"au-table-actions"],["icon","fto-eye","title","\u67e5\u770b",3,"click"],["icon","fto-edit","title","\u4fee\u6539",3,"disabled","click"],["icon","fto-trash-2","title","\u5220\u9664",3,"disabled","click"]],template:function(t,e){if(1&t&&(o.Ob(0,"x-dialog",0,1),o.Vb("visibleChange",(function(t){return e.samplevisible=t})),o.Ob(2,"app-addsample",2,3),o.Vb("sendaddsample",(function(t){return e.handlesamplechange(t)})),o.Nb(),o.Nb(),o.Ob(4,"x-row"),o.Ob(5,"x-col",4),o.Ob(6,"x-button",5),o.Vb("click",(function(){return!e.disabled&&e.sampleaction("add")})),o.xc(7," \u65b0\u589e "),o.Nb(),o.Nb(),o.Ob(8,"x-col",4),o.Ob(9,"x-button",5),o.Vb("click",(function(){return!e.disabled&&e.sampleaction("copyadd")})),o.xc(10," \u590d\u5236\u65b0\u589e "),o.Nb(),o.Nb(),o.Nb(),o.Ob(11,"x-row"),o.Ob(12,"x-col"),o.Ob(13,"x-table",6,7),o.Vb("indexChange",(function(t){return e.sampleindex=t}))("sizeChange",(function(t){return e.samplesize=t}))("activatedRowChange",(function(t){return e.activechange(t)})),o.Nb(),o.Nb(),o.Nb(),o.vc(15,it,4,2,"ng-template",null,8,o.wc)),2&t){var a=o.kc(16);o.ec("visible",e.samplevisible)("showConfirm",!1)("showCancel",!1)("backdropClose",!1)("hasBackdrop",!1),o.yb(2),o.ec("currentsample",e.currentsample)("domaindisabled",e.domaindisabled),o.yb(4),o.ec("disabled",e.disabled),o.yb(3),o.ec("disabled",e.disabled),o.yb(4),o.ec("data",e.sampledata)("columns",e.samplecolumns)("index",e.sampleindex)("size",e.samplesize)("total",e.sampletotal)("bodyColumnTpl",o.gc(15,ct,a))}},directives:[S.a,tt.a,O.c,O.a,E.a,C.a,G.a],styles:[""]}),nt),st=a("oJeN"),ot=a("Prn+"),lt=a("4h90"),ut=a("ofXK"),_t=a("5IKz"),dt=a("3Pt+"),bt=["selcustomer"],pt=["inspectcustomer"],ht=["paycustomer"],mt=["sampledata"],ft=["invalidcollectionfee"],vt=["invalidbusinessfee"],gt=["invalidreportcount"],Ot=["invalidexternfee"];function Et(t,e){if(1&t&&(o.Ob(0,"div",35),o.xc(1),o.Nb()),2&t){var a=o.Yb();o.yb(1),o.yc(a.invalidinfo)}}function Ct(t,e){if(1&t){var a=o.Pb();o.Ob(0,"x-tag",36),o.Vb("close",(function(){o.mc(a);var t=e.$implicit,i=o.Yb();return!i.contactdisabled&&!i.disabled&&i.tagclose(t,"delegate")})),o.xc(1),o.Nb()}if(2&t){var i=e.$implicit,n=o.Yb();o.ec("disabled",n.disabled||n.contactdisabled),o.yb(1),o.yc(i.customername)}}function yt(t,e){if(1&t){var a=o.Pb();o.Ob(0,"x-tag",36),o.Vb("close",(function(){o.mc(a);var t=e.$implicit,i=o.Yb();return!i.contactdisabled&&!i.disabled&&i.tagclose(t,"pay")})),o.xc(1),o.Nb()}if(2&t){var i=e.$implicit,n=o.Yb();o.ec("disabled",n.disabled||n.contactdisabled),o.yb(1),o.yc(i.customername)}}function Mt(t,e){if(1&t){var a=o.Pb();o.Ob(0,"x-tag",36),o.Vb("close",(function(){o.mc(a);var t=e.$implicit,i=o.Yb();return!i.contactdisabled&&!i.disabled&&i.tagclose(t,"inspect")})),o.xc(1),o.Nb()}if(2&t){var i=e.$implicit,n=o.Yb();o.ec("disabled",n.disabled||n.contactdisabled),o.yb(1),o.yc(i.customername)}}var Pt,Dt=((Pt=function(){function t(e,a,i,n,c,r){_classCallCheck(this,t),this.receiveservice=e,this.sealService=a,this.service=i,this.projectservicetype=n,this.domainservice=c,this.Msg=r,this.projectchange=new o.n,this.process=[],this.processid=1,this.currentprojectcount=0,this.currentcontactdisabled=!1,this.multiplereportdata=[{id:0,label:"\u5408\u51fa\u62a5\u544a"},{id:1,label:"\u5206\u51fa\u62a5\u544a"}],this.multiplereport=0,this.judgedata=[{id:1,label:"\u662f"},{id:0,label:"\u5426"}],this.externdata=[{id:1,label:"\u662f"},{id:0,label:"\u5426"}],this.domaindata=[],this.domain=1,this.sealdata=[],this.seal=[],this.ugencyservice=!1,this.standardservice=!0,this.customertype="",this.delegates=[],this.inspects=[],this.pays=[],this.servicetype=1,this.selvisible=!1,this.customeradaption=240,this.hidebutton="none",this.invalidinfo="",this.showTableBoolean=!1,this.currentcontact={},this.disablecls="x-radio x-flex x-justify-start x-align-start x-direction-column",this.samplesourcedata=[],this.samplesource=1,this.payvisible=!1,this.inspectvisible=!1,this.inspectfunctiontype=3,this.payfunctiontype=2}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.receiveservice.getList(1,20,{}).subscribe((function(e){t.samplesourcedata=e.list})),this.sealService.getList(1,20,{}).subscribe((function(e){t.sealdata=e.list})),this.projectservicetype.getList(1,20,{}).subscribe((function(e){t.servicetypedata=e.list})),this.domainservice.getList(1,20,{}).subscribe((function(e){t.domaindata=e.list})),this.sealService.getsampleprocess().subscribe((function(e){t.process=e.list})),setTimeout((function(){t.showTableBoolean=!0}),0)}},{key:"getprocessmodel",value:function(t){return null==t||null==t?2:t}},{key:"setinit",value:function(t){var e=this;if(this.currentprojectcount=t,null!=this.currentproject.samples&&(this.sampledata.type=this.type,this.sampledata.currentproject=this.currentproject,this.sampledata.setsampledata(this.currentproject.samples)),this.delegates=[],this.pays=[],this.inspects=[],null!=this.currentcontact){if(null!=this.currentcontact.contactcustomers&&0!=this.currentcontact.contactcustomers.length&&this.currentcontact.contactcustomers.map((function(t){1==t.customertype&&e.delegates.push({id:t.customerid+"",customername:t.customername}),2==t.customertype&&e.pays.push({id:t.customerid+"",customername:t.customername}),3==t.customertype&&e.inspects.push({id:t.customerid+"",customername:t.customername})})),null!=this.currentcontact.seal){this.seal=[];for(var a=0;a<this.currentcontact.seal.length;a++)this.seal.push(Number(this.currentcontact.seal[a].id))}null!=this.currentcontact.service&&(this.servicetype=Number(this.currentcontact.service.id)),null!=this.currentcontact.samplesource&&(this.samplesource=Number(this.currentcontact.samplesource.id))}}},{key:"selconfirm",value:function(){switch(this.customertype){case"delegate":this.delegates=this.selcustomer.seldata;break;case"pay":this.pays=[this.paycustomer.customtable.activatedRow];break;case"inspect":this.inspects=[this.inspectcustomer.customtable.activatedRow]}}},{key:"tagclose",value:function(t,e){switch(e){case"delegate":this.deletetag(this.delegates,t.id+"");break;case"pay":this.deletetag(this.pays,t.id+"");break;case"inspect":this.deletetag(this.inspects,t.id+"")}}},{key:"deletetag",value:function(t,e){var a=t.findIndex((function(t){return t.id==e}));-1!=a&&t.splice(a,1)}},{key:"setproject",value:function(){var t,e,a,i=this;if(!this.contactdisabled&&null!=this.currentcontact){null!=this.currentcontact.contactcustomers&&(this.currentcontact.contactcustomers=[],this.delegates.map((function(t){null!=i.currentcontact.contactcustomers&&i.currentcontact.contactcustomers.push({contactid:i.currentcontact.id+"",customerid:t.id,customername:t.customername,customertype:1})})),this.pays.length>0&&this.currentcontact.contactcustomers.push({contactid:this.currentcontact.id+"",customerid:this.pays[0].id,customername:this.pays[0].customername,customertype:2}),this.inspects.length>0&&this.currentcontact.contactcustomers.push({contactid:this.currentcontact.id+"",customerid:this.inspects[0].id,customername:this.inspects[0].customername,customertype:3})),this.currentcontact.samplesource=this.getpr(this.samplesource+"",this.samplesourcedata),this.currentcontact.seal=[];for(var n=0;n<this.seal.length;n++)console.log(null===(t=this.currentcontact.seal)||void 0===t?void 0:t.findIndex((function(t){return t.id==i.seal[n].id}))),-1==(null===(e=this.currentcontact.seal)||void 0===e?void 0:e.findIndex((function(t){return t.id==i.seal[n].id})))&&(null===(a=this.currentcontact.seal)||void 0===a||a.push(this.getpr(this.seal[n]+"",this.sealdata)));this.currentcontact.service=this.getpr(this.servicetype+"",this.servicetypedata)}null!=this.currentproject&&this.sampledata.sampledata.length>0&&(this.currentproject.domain=this.getpr(this.sampledata.sampledata[0].domainid+"",this.domaindata),this.currentproject.samples=this.sampledata.sampledata)}},{key:"getpr",value:function(t,e){var a=e.find((function(e){return e.id==t}));return null!=a?a:{}}},{key:"setmultiproject",value:function(t){if(1==this.currentproject.mergereport){if(null!=this.currentproject.samples)for(var e=0;e<this.currentproject.samples.length;e++){var a={};for(var i in this.currentproject)a[i]=this.currentproject[i];a.samples=[],a.id=b.a.JsNewGuid();var n={};for(var i in this.currentproject.samples[e])n[i]=this.currentproject.samples[e][i];n.projectid=a.id,a.samples.push(n);var c=this.domaindata.find((function(t){return t.id==n.domainid}));null!=c&&(a.domain=c),a.projectnumber=a.projectnumber+""+(this.currentprojectcount+e+1),t.push(a)}}else 0==this.currentproject.projectstatus&&(this.currentproject.projectnumber="\u4e34\u65f6\u9879\u76ee"+(this.currentprojectcount+1)),t.push(this.currentproject)}},{key:"action",value:function(t){var e=this;switch(t){case"save":this.setproject();var a=[];this.setmultiproject(a),"add"==this.type?this.service.post({id:b.a.JsNewGuid(),projects:a}).subscribe((function(t){e.projectchange.emit(t.projects),e.Msg.success("\u6dfb\u52a0\u6210\u529f")})):"edit"==this.type&&(1==a.length?this.service.put({id:b.a.JsNewGuid(),projects:a}).subscribe((function(t){e.projectchange.emit(t.projects),e.Msg.success("\u4fee\u6539\u6210\u529f")})):this.service.delete(this.currentproject.id+"").subscribe((function(t){e.service.post({id:b.a.JsNewGuid(),projects:a}).subscribe((function(t){e.projectchange.emit(t.projects)}))})));break;case"cancel":this.projectchange.emit(void 0)}}},{key:"addcustomer",value:function(t){switch(this.customertype=t,t){case"delegate":this.selvisible=!0,this.selcustomer.seldata=this.delegates,this.selcustomer.setselect();break;case"pay":this.payvisible=!0,this.paycustomer.seldata=this.pays,this.paycustomer.setselect(!1);break;case"inspect":this.inspectvisible=!0,this.inspectcustomer.seldata=this.inspects,this.inspectcustomer.setselect(!1)}}},{key:"contactdisabled",set:function(t){this.currentcontactdisabled=t},get:function(){return this.currentcontactdisabled}},{key:"formInvalid",get:function(){var t,e,a;return this.invalidinfo="",null!=this.delegates&&0==this.delegates.length?(this.invalidinfo="\u5ba2\u6237\u4e0d\u80fd\u4e3a\u7a7a",!0):null!=this.invalidcollectionfee&&null!=this.invalidcollectionfee.value&&isNaN(this.invalidcollectionfee.value)?(this.invalidinfo="\u91c7\u6837\u8d39\u4e0d\u662f\u6570\u5b57",!0):null!=this.invalidbusinessfee&&null!=this.invalidbusinessfee.value&&isNaN(this.invalidbusinessfee.value)?(this.invalidinfo="\u4e1a\u52a1\u8d39\u4e0d\u662f\u6570\u5b57",!0):null==this.invalidreportcount||null==this.invalidreportcount.value||/^[0-9]{1,10}$/.test(this.invalidreportcount.value)?null!=this.invalidexternfee&&null!=this.invalidexternfee.value&&isNaN(this.invalidexternfee.value)?(this.invalidinfo="\u5916\u5305\u8d39\u4e0d\u662f\u6570\u5b57",!0):null!=this.sampledata&&null!=(null===(t=this.sampledata)||void 0===t?void 0:t.sampledata)&&0==(null===(a=null===(e=this.sampledata)||void 0===e?void 0:e.sampledata)||void 0===a?void 0:a.length)&&(this.invalidinfo="\u6837\u54c1\u4e0d\u80fd\u4e3a\u7a7a",!0):(this.invalidinfo="\u62a5\u544a\u4efd\u6570\u4e0d\u662f\u6570\u5b57",!0)}},{key:"disabled",get:function(){return"info"==this.type}}]),t}()).\u0275fac=function(t){return new(t||Pt)(o.Ib(f.b),o.Ib(f.c),o.Ib(f.a),o.Ib(f.d),o.Ib(j.d),o.Ib(g.c))},Pt.\u0275cmp=o.Cb({type:Pt,selectors:[["app-addbusinessproject"]],viewQuery:function(t,e){var a;1&t&&(o.Cc(bt,!0),o.Cc(pt,!0),o.Cc(ht,!0),o.Cc(mt,!0),o.Cc(ft,!0),o.Cc(vt,!0),o.Cc(gt,!0),o.Cc(Ot,!0)),2&t&&(o.jc(a=o.Wb())&&(e.selcustomer=a.first),o.jc(a=o.Wb())&&(e.inspectcustomer=a.first),o.jc(a=o.Wb())&&(e.paycustomer=a.first),o.jc(a=o.Wb())&&(e.sampledata=a.first),o.jc(a=o.Wb())&&(e.invalidcollectionfee=a.first),o.jc(a=o.Wb())&&(e.invalidbusinessfee=a.first),o.jc(a=o.Wb())&&(e.invalidreportcount=a.first),o.jc(a=o.Wb())&&(e.invalidexternfee=a.first))},inputs:{currentproject:"currentproject"},outputs:{projectchange:"projectchange"},decls:99,vars:51,consts:[["width","50%","height","30%","placement","top",3,"visible","backdropClose","hasBackdrop","visibleChange","confirm"],["Seldialog",""],[2,"width","100%","height","100%",3,"customeradaption","hidebutton"],["selcustomer",""],[2,"width","100%","height","100%",3,"customeradaption","functiontype"],["paycustomer",""],["inspectcustomer",""],[1,"au-inner","au-column"],["id","displaytag","style","color: crimson;font-size: 10pt;",4,"ngIf"],["plain","","icon","fto-plus","size","small",2,"flex","1",3,"disabled","click"],[1,"row"],["type","info","style","flex:1;","closable","",3,"disabled","close",4,"ngFor","ngForOf"],["plain","","size","small","icon","fto-plus",2,"flex","1",3,"disabled","click"],[2,"height","20px"],["span","2"],["span","5"],[3,"disabled","data","ngModel","ngModelChange"],["span","3"],["label","\u6837\u54c1\u5904\u7406","direction","row",3,"data","ngModel","ngModelChange"],["span","7"],["span","2",1,"x-radio-label"],["span","4"],["span","1",1,"x-radio-label"],[3,"disabled","ngModel","ngModelChange"],["invalidcollectionfee",""],["invalidbusinessfee",""],["invalidexternfee",""],["span","1"],["invalidreportcount",""],[2,"height","30px"],["sampledata",""],[2,"width","90%"],[2,"width","5%"],["plain","","icon","fto-chevron-left",3,"click"],["icon","fto-save","type","primary","plain","",3,"disabled","click"],["id","displaytag",2,"color","crimson","font-size","10pt"],["type","info","closable","",2,"flex","1",3,"disabled","close"]],template:function(t,e){1&t&&(o.Ob(0,"x-dialog",0,1),o.Vb("visibleChange",(function(t){return e.selvisible=t}))("confirm",(function(){return e.selconfirm()})),o.Jb(2,"app-customer",2,3),o.Nb(),o.Ob(4,"x-dialog",0,1),o.Vb("visibleChange",(function(t){return e.payvisible=t}))("confirm",(function(){return e.selconfirm()})),o.Jb(6,"app-customer",4,5),o.Nb(),o.Ob(8,"x-dialog",0,1),o.Vb("visibleChange",(function(t){return e.inspectvisible=t}))("confirm",(function(){return e.selconfirm()})),o.Jb(10,"app-customer",4,6),o.Nb(),o.Ob(12,"x-inner",7),o.vc(13,Et,2,1,"div",8),o.Ob(14,"x-row"),o.Ob(15,"table"),o.Ob(16,"tr"),o.Ob(17,"td"),o.Ob(18,"x-button",9),o.Vb("click",(function(){return!e.contactdisabled&&!e.disabled&&e.addcustomer("delegate")})),o.xc(19,"\u6dfb\u52a0\u59d4\u6258\u5ba2\u6237"),o.Nb(),o.Nb(),o.Ob(20,"td"),o.Ob(21,"div",10),o.vc(22,Ct,2,2,"x-tag",11),o.Nb(),o.Nb(),o.Ob(23,"td"),o.Ob(24,"x-button",9),o.Vb("click",(function(){return!e.contactdisabled&&!e.disabled&&e.addcustomer("pay")})),o.xc(25,"\u6dfb\u52a0\u4ed8\u6b3e\u5355\u4f4d"),o.Nb(),o.Nb(),o.Ob(26,"td"),o.vc(27,yt,2,2,"x-tag",11),o.Nb(),o.Ob(28,"td"),o.Ob(29,"x-button",12),o.Vb("click",(function(){return!e.contactdisabled&&!e.disabled&&e.addcustomer("inspect")})),o.xc(30,"\u6dfb\u52a0\u53d7\u68c0\u5355\u4f4d"),o.Nb(),o.Nb(),o.Ob(31,"td"),o.vc(32,Mt,2,2,"x-tag",11),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Jb(33,"x-row",13),o.Ob(34,"x-row"),o.Ob(35,"x-col",14),o.xc(36,"\u6837\u54c1\u6765\u6e90"),o.Nb(),o.Ob(37,"x-col",15),o.Ob(38,"x-radio",16),o.Vb("ngModelChange",(function(t){return e.samplesource=t})),o.Nb(),o.Nb(),o.Ob(39,"x-col",14),o.xc(40,"\u662f\u5426\u5224\u5b9a"),o.Nb(),o.Ob(41,"x-col",17),o.Ob(42,"x-radio",16),o.Vb("ngModelChange",(function(t){return e.currentcontact.isjudgement=t})),o.Nb(),o.Nb(),o.Ob(43,"x-col",14),o.xc(44,"\u662f\u5426\u5916\u5305"),o.Nb(),o.Ob(45,"x-col",17),o.Ob(46,"x-radio",16),o.Vb("ngModelChange",(function(t){return e.currentcontact.isextern=t})),o.Nb(),o.Nb(),o.Ob(47,"x-col",15),o.Ob(48,"x-select",18),o.Vb("ngModelChange",(function(t){return e.currentcontact.processid=t})),o.Nb(),o.Nb(),o.Nb(),o.Jb(49,"x-row",13),o.Ob(50,"x-row"),o.Ob(51,"x-col",14),o.xc(52,"\u8d44\u8d28\u76d6\u7ae0"),o.Nb(),o.Ob(53,"x-col",19),o.Ob(54,"x-checkbox",16),o.Vb("ngModelChange",(function(t){return e.seal=t})),o.Nb(),o.Nb(),o.Ob(55,"x-col",14),o.xc(56,"\u670d\u52a1\u7c7b\u578b"),o.Nb(),o.Ob(57,"x-col",15),o.Ob(58,"x-radio",16),o.Vb("ngModelChange",(function(t){return e.servicetype=t})),o.Nb(),o.Nb(),o.Nb(),o.Jb(59,"x-row",13),o.Ob(60,"x-row"),o.Ob(61,"x-col",20),o.xc(62,"\u62a5\u544a\u5f62\u5f0f"),o.Nb(),o.Ob(63,"x-col",21),o.Ob(64,"x-radio",16),o.Vb("ngModelChange",(function(t){return e.currentproject.mergereport=t})),o.Nb(),o.Nb(),o.Ob(65,"x-col",22),o.xc(66,"\u91c7\u6837\u8d39"),o.Nb(),o.Ob(67,"x-col",14),o.Ob(68,"x-input",23,24),o.Vb("ngModelChange",(function(t){return e.currentcontact.collectionfee=t})),o.Nb(),o.Nb(),o.Ob(70,"x-col",22),o.xc(71,"\u4e1a\u52a1\u8d39"),o.Nb(),o.Ob(72,"x-col",14),o.Ob(73,"x-input",23,25),o.Vb("ngModelChange",(function(t){return e.currentcontact.businessfee=t})),o.Nb(),o.Nb(),o.Ob(75,"x-col",22),o.xc(76,"\u5916\u5305\u8d39"),o.Nb(),o.Ob(77,"x-col",14),o.Ob(78,"x-input",23,26),o.Vb("ngModelChange",(function(t){return e.currentcontact.externfee=t})),o.Nb(),o.Nb(),o.Ob(80,"x-col",14),o.xc(81,"\u62a5\u544a\u4efd\u6570"),o.Nb(),o.Ob(82,"x-col",27),o.Ob(83,"x-input",23,28),o.Vb("ngModelChange",(function(t){return e.currentproject.reportcount=t})),o.Nb(),o.Nb(),o.Nb(),o.Jb(85,"x-row",29),o.Ob(86,"x-row"),o.Jb(87,"app-sample",null,30),o.Nb(),o.Ob(89,"x-row"),o.Ob(90,"table"),o.Ob(91,"tr"),o.Jb(92,"td",31),o.Ob(93,"td",32),o.Ob(94,"x-button",33),o.Vb("click",(function(){return e.action("cancel")})),o.xc(95,"\u8fd4\u56de"),o.Nb(),o.Nb(),o.Ob(96,"td",32),o.Ob(97,"x-button",34),o.Vb("click",(function(){return!e.disabled&&!e.formInvalid&&e.action("save")})),o.xc(98," \u4fdd\u5b58 "),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&t&&(o.ec("visible",e.selvisible)("backdropClose",!1)("hasBackdrop",!1),o.yb(2),o.ec("customeradaption",e.customeradaption)("hidebutton",e.hidebutton),o.yb(2),o.ec("visible",e.payvisible)("backdropClose",!1)("hasBackdrop",!1),o.yb(2),o.ec("customeradaption",e.customeradaption)("functiontype",e.payfunctiontype),o.yb(2),o.ec("visible",e.inspectvisible)("backdropClose",!1)("hasBackdrop",!1),o.yb(2),o.ec("customeradaption",e.customeradaption)("functiontype",e.inspectfunctiontype),o.yb(3),o.ec("ngIf",e.showTableBoolean),o.yb(5),o.ec("disabled",e.disabled||e.contactdisabled),o.yb(4),o.ec("ngForOf",e.delegates),o.yb(2),o.ec("disabled",e.disabled||e.contactdisabled),o.yb(3),o.ec("ngForOf",e.pays),o.yb(2),o.ec("disabled",e.disabled||e.contactdisabled),o.yb(3),o.ec("ngForOf",e.inspects),o.yb(6),o.ec("disabled",e.disabled||e.contactdisabled)("data",e.samplesourcedata)("ngModel",e.samplesource),o.yb(4),o.ec("disabled",e.disabled||e.contactdisabled)("data",e.judgedata)("ngModel",e.currentcontact.isjudgement),o.yb(4),o.ec("disabled",e.disabled||e.contactdisabled)("data",e.externdata)("ngModel",e.currentcontact.isextern),o.yb(2),o.ec("data",e.process)("ngModel",e.currentcontact.processid),o.yb(6),o.ec("disabled",e.disabled||e.contactdisabled)("data",e.sealdata)("ngModel",e.seal),o.yb(4),o.ec("disabled",e.disabled||e.contactdisabled)("data",e.servicetypedata)("ngModel",e.servicetype),o.yb(6),o.ec("disabled",e.disabled)("data",e.multiplereportdata)("ngModel",e.currentproject.mergereport),o.yb(4),o.ec("disabled",e.disabled||e.contactdisabled)("ngModel",e.currentcontact.collectionfee),o.yb(5),o.ec("disabled",e.disabled||e.contactdisabled)("ngModel",e.currentcontact.businessfee),o.yb(5),o.ec("disabled",e.disabled||e.contactdisabled)("ngModel",e.currentcontact.externfee),o.yb(5),o.ec("disabled",e.disabled)("ngModel",e.currentproject.reportcount),o.yb(14),o.ec("disabled",e.formInvalid||e.disabled))},directives:[S.a,X,N.a,ut.t,O.c,E.a,ut.s,O.a,_t.a,dt.q,dt.t,st.a,ot.a,J.a,rt,lt.a],styles:[""]}),Pt),xt=["projectlist"],It=["addbusiness"];function wt(t,e){if(1&t){var a=o.Pb();o.Ob(0,"div",10),o.Ob(1,"x-link",11),o.Vb("click",(function(){o.mc(a);var t=e.$row,i=o.Yb();return i.auth.info&&i.action("info",t)})),o.Nb(),o.Ob(2,"x-link",12),o.Vb("click",(function(){o.mc(a);var t=e.$row,i=o.Yb();return!i.disabled(t)&&i.auth.edit&&i.action("edit",t)})),o.Nb(),o.Ob(3,"x-link",13),o.Vb("click",(function(){o.mc(a);var t=e.$row,i=o.Yb();return!i.disabled(t)&&i.auth.delete&&i.action("delete",t)})),o.Nb(),o.Nb()}if(2&t){var i=e.$row,n=o.Yb();o.yb(1),o.ec("disabled",!n.auth.info),o.yb(1),o.ec("disabled",!n.auth.edit||n.disabled(i)),o.yb(1),o.ec("disabled",!n.auth.delete||n.disabled(i))}}var kt,jt,At,Tt,Rt=function(t){return{actions:t}},Bt=((kt=function(t){_inherits(a,t);var e=_createSuper(a);function a(t,i,n,c){var r;return _classCallCheck(this,a),(r=e.call(this,t)).indexService=t,r.service=i,r.msgBox=n,r.msg=c,r.ProjectsChange=new o.n,r.type="add",r.visible=!1,r.columns=[{id:"actions",label:"\u64cd\u4f5c",width:100},{id:"projectnumber",label:"\u9879\u76ee\u7f16\u53f7",width:150,sort:!0},{id:"domainlabel",label:"\u9886\u57df",width:150,sort:!0}],r.size=20,r.index=1,r.query={filter:[]},r.total=0,r.activeprojectid="",r.currentproject={mergereport:1,reportcount:2},r.contactdisabled=!1,r.auth={},r}return _createClass(a,[{key:"ngOnInit",value:function(){}},{key:"setproject",value:function(t){var e;null!=t&&(t.domainlabel=null===(e=t.domain)||void 0===e?void 0:e.label)}},{key:"projectchange",value:function(t){var e=this;if(this.visible=!1,null!=t){var a=t.findIndex((function(t){return t.id==e.currentproject.id})),i=this.data.findIndex((function(t){return t.id==e.currentproject.id}));-1==a&&-1!=i&&this.data.splice(i,1);for(var n=0;n<t.length;n++){this.setproject(t[n]);var c=this.data.findIndex((function(e){return e.id==t[n].id}));-1==c?this.data.push(t[n]):this.data.splice(c,1,t[n])}this.data=_toConsumableArray(this.data),null!=this.ProjectsChange&&this.ProjectsChange.emit(this.data)}}},{key:"copayaction",value:function(t){var e=this;if(null!=this.projectlist.activatedRow){var a=b.a.deepClone(this.currentproject);console.log(a),a.id=b.a.JsNewGuid(),a.projectstatus=0,a.samples.map((function(t){t.projectid=a.id,t.id=b.a.JsNewGuid(),t.testprojects.map((function(e){e.sampleid=t.id}))})),a.projectnumber=a.projectnumber+"\u590d\u4ef6",this.service.post({id:b.a.JsNewGuid(),projects:[a]}).subscribe((function(t){e.data.push(a),e.data=_toConsumableArray(e.data),e.projectlist.activatedRow=a,e.currentproject=a,null!=e.ProjectsChange&&e.ProjectsChange.emit(e.data)}))}}},{key:"activechange",value:function(t){this.currentproject=t}},{key:"getproject",value:function(){var t=b.a.JsNewGuid();return{contactid:this.currentcontact.id+"",id:t,projectnumber:"\u4e34\u65f6\u9879\u76ee",reportcount:2,domain:{id:1},mergereport:0,samples:[]}}},{key:"setswitch",value:function(t,e){this.visible=!0,this.addbusiness.type=t,this.addbusiness.currentproject=e,this.currentproject=e,this.addbusiness.currentcontact=this.currentcontact,this.addbusiness.setinit(this.data.length)}},{key:"action",value:function(t,e){var a=this;switch(this.addbusiness.contactdisabled=!1,this.contactdisabled=!1,t){case"add":null!=this.currentcontact&&null!=this.currentcontact.id&&(this.data.length>0&&(this.addbusiness.contactdisabled=!0,this.contactdisabled=!0),this.setswitch(t,this.getproject()));break;case"info":e.mergereport=0,this.setswitch(t,e);break;case"edit":e.mergereport=0,this.data.findIndex((function(t){return t.id==e.id}))>0&&(this.addbusiness.contactdisabled=!0,this.contactdisabled=!0),this.setswitch(t,e);break;case"delete":this.msgBox.confirm({title:"\u63d0\u793a",content:"\u6b64\u64cd\u4f5c\u5c06\u6c38\u4e45\u5220\u9664\u6b64\u6761\u6570\u636e\uff1a".concat(e.id,"\uff0c\u662f\u5426\u7ee7\u7eed\uff1f"),type:"warning",callback:function(t){"confirm"===t&&a.service.delete(e.id).subscribe((function(t){var i=a.data.findIndex((function(t){return t.id==e.id}));-1!=i&&(a.data.splice(i,1),a.msg.success("\u5220\u9664\u6210\u529f"),a.data=_toConsumableArray(a.data),0!=i?a.projectlist.activatedRow=a.data[i-1]:0==i&&a.data.length>0&&(a.projectlist.activatedRow=a.data[0]))}))}})}}},{key:"disabled",value:function(t){return!(null==t||!t.submit)}},{key:"IndexChange",value:function(t){}},{key:"getdata",value:function(){var t=this;this.data=[],this.currentproject={},this.projectlist.activatedRow=void 0,this.total=0,null!=this.currentcontact&&null!=this.currentcontact.id&&(this.query={filter:[{field:"contactid",value:this.currentcontact.id+"",operation:"="}]},this.service.getList(this.index,this.size,this.query).subscribe((function(e){var a;if(a=[e.list,Number(e.total)],t.data=a[0],t.total=a[1],t.data.map((function(e){t.setproject(e)})),""!=t.activeprojectid){var i=t.data.findIndex((function(e){return e.id==t.activeprojectid}));t.currentproject=-1!=i?t.data[i]:t.data[0]}else t.data.length>0&&(t.currentproject=t.data[0]);t.projectlist.activatedRow=t.currentproject})))}}]),a}(_.a)).\u0275fac=function(t){return new(t||kt)(o.Ib(u.a),o.Ib(f.a),o.Ib(v.c),o.Ib(g.c))},kt.\u0275cmp=o.Cb({type:kt,selectors:[["app-businessproject"]],viewQuery:function(t,e){var a;1&t&&(o.Cc(xt,!0),o.Cc(It,!0)),2&t&&(o.jc(a=o.Wb())&&(e.projectlist=a.first),o.jc(a=o.Wb())&&(e.addbusiness=a.first))},inputs:{auth:"auth"},outputs:{ProjectsChange:"ProjectsChange"},features:[o.vb],decls:17,vars:18,consts:[["width","70%","height","80%","placement","top",3,"visible","showConfirm","showCancel","backdropClose","hasBackdrop","visibleChange"],["dialogcustomer",""],[2,"width","100%","height","100%",3,"currentproject","projectchange"],["addbusiness",""],["span","6"],["icon","fto-plus","plain","",3,"disabled","click"],["span","5"],["virtualScroll","","loading","",3,"data","columns","index","size","total","query","adaptionHeight","bodyColumnTpl","indexChange","sizeChange","activatedRowChange"],["projectlist",""],["contactTpl",""],[1,"au-table-actions"],["icon","fto-eye","title","\u67e5\u770b",3,"disabled","click"],["icon","fto-edit","title","\u4fee\u6539",3,"disabled","click"],["icon","fto-trash-2","title","\u5220\u9664",3,"disabled","click"]],template:function(t,e){if(1&t&&(o.Ob(0,"x-dialog",0,1),o.Vb("visibleChange",(function(t){return e.visible=t})),o.Ob(2,"app-addbusinessproject",2,3),o.Vb("projectchange",(function(t){return e.projectchange(t)})),o.Nb(),o.Nb(),o.Ob(4,"x-row"),o.Ob(5,"x-col",4),o.Ob(6,"x-button",5),o.Vb("click",(function(){return e.auth.add&&e.action("add")})),o.xc(7," \u65b0\u589e "),o.Nb(),o.Nb(),o.Ob(8,"x-col",6),o.Ob(9,"x-button",5),o.Vb("click",(function(){return e.auth.add&&e.copayaction("add")})),o.xc(10," \u590d\u5236\u65b0\u589e "),o.Nb(),o.Nb(),o.Nb(),o.Ob(11,"x-row"),o.Ob(12,"x-col"),o.Ob(13,"x-table",7,8),o.Vb("indexChange",(function(t){return e.index=t}))("sizeChange",(function(t){return e.size=t}))("activatedRowChange",(function(t){return e.activechange(t)}))("indexChange",(function(t){return e.IndexChange(t)})),o.Nb(),o.Nb(),o.Nb(),o.vc(15,wt,4,3,"ng-template",null,9,o.wc)),2&t){var a=o.kc(16);o.ec("visible",e.visible)("showConfirm",!1)("showCancel",!1)("backdropClose",!1)("hasBackdrop",!1),o.yb(2),o.ec("currentproject",e.currentproject),o.yb(4),o.ec("disabled",!e.auth.add),o.yb(3),o.ec("disabled",!e.auth.add),o.yb(4),o.ec("data",e.data)("columns",e.columns)("index",e.index)("size",e.size)("total",e.total)("query",e.query)("adaptionHeight",124)("bodyColumnTpl",o.gc(16,Rt,a))}},directives:[S.a,Dt,O.c,O.a,E.a,C.a,G.a],styles:[""]}),kt),Lt=["contactlist"],Wt=["businessprojectlist"],Nt=["customerlist"],Kt=[{path:"",component:(jt=function(t){_inherits(a,t);var e=_createSuper(a);function a(t,i,n,c){var r;return _classCallCheck(this,a),(r=e.call(this,t)).indexService=t,r.contactService=i,r.activatedRoute=n,r.flowservice=c,r.collectionform=[{id:1,label:"\u91c7\u6837"},{id:2,label:"\u9001\u6837"},{id:3,label:"\u90ae\u5bc4"}],r.collectionmodel=1,r.weituomodel=1,r.standprice=2300.45,r.discountprice=1800.97,r.styleset="display:none",r.showTableBoolean=!1,r.showTableBooleancon=!1,r.showTableBooleanpr=!1,r.taskprojectid="",r.taskcustomerid=0,r.taskcontactid="",r.activatedRoute.params.subscribe((function(t){null!=t.projectid?r.flowservice.getcontactbyproject(t.contactid).subscribe((function(t){r.taskprojectid=t.projectid,r.taskcustomerid=t.customerid,r.taskcontactid=t.contactid})):r.taskcustomerid=-1})),r}return _createClass(a,[{key:"changeCustomer",value:function(t){null!=this.taskcustomerid&&-1!=this.taskcustomerid&&this.customerlist.setActive(this.taskcustomerid),this.contactlist.activeid="",-1!=this.taskcustomerid&&(this.contactlist.activeid=this.taskcontactid),this.contactlist.customer=this.customerlist.currentCustomer,this.contactlist.getcontactdata(!0)}},{key:"contactChange",value:function(t){var e;if(0==this.contactlist.contactdata.length)this.businessprojectlist.currentcontact={},this.businessprojectlist.currentproject={};else{var a=null===(e=t.contactcustomers)||void 0===e?void 0:e.findIndex((function(t){return null!=t.customertype&&1==t.customertype}));console.log(t),-1!=a&&null!=a||(console.log("32"),t.contactcustomers=[{contactid:t.id+"",customername:this.contactlist.customer.customername,customerid:this.contactlist.customer.id,customertype:1},{contactid:t.id+"",customername:this.contactlist.customer.customername,customerid:this.contactlist.customer.id,customertype:2},{contactid:t.id+"",customername:this.contactlist.customer.customername,customerid:this.contactlist.customer.id,customertype:3}],t.isjudgement=0,t.judgement="",t.judgementstandard="",t.service={id:1},t.samplesource={id:1},t.seal=[{id:1}],t.collectionfee=0,t.externfee=0,t.businessfee=0),this.businessprojectlist.currentcontact=t}this.businessprojectlist.getdata(),null!=this.taskprojectid&&""!=this.taskprojectid&&(this.businessprojectlist.activeprojectid=this.taskprojectid)}},{key:"setdis",value:function(){this.styleset="display:inline"}},{key:"ProjectsChange",value:function(t){var e,a,i,n=this;this.contactlist.currentContact.testfee=0,this.contactlist.currentContact.standardfee=0;var c=0;t.map((function(t){var e;c+=50*(Number(t.reportcount)-2),null===(e=t.samples)||void 0===e||e.map((function(t){n.contactlist.currentContact.testfee=Number(n.contactlist.currentContact.testfee)+Number(t.price),n.contactlist.currentContact.standardfee=Number(n.contactlist.currentContact.standardfee)+Number(t.standardfee)}))})),2==(null===(e=this.contactlist.currentContact.service)||void 0===e?void 0:e.id)&&(this.contactlist.currentContact.standardfee=2*Number(this.contactlist.currentContact.standardfee)),3==(null===(a=this.contactlist.currentContact.service)||void 0===a?void 0:a.id)&&(this.contactlist.currentContact.standardfee=1.5*Number(this.contactlist.currentContact.standardfee)),0!=this.contactlist.currentContact.standardfee&&(this.contactlist.currentContact.discount=Object(s.round)(Number(this.contactlist.currentContact.testfee)/Number(this.contactlist.currentContact.standardfee)*100)/100),this.contactlist.currentContact.totalfee=Object(s.round)(100*(Number(this.contactlist.currentContact.testfee)+Number(this.contactlist.currentContact.businessfee)+Number(this.contactlist.currentContact.collectionfee)+c+Number(this.contactlist.currentContact.externfee)))/100,this.contactlist.currentContact.ugency=null===(i=this.contactlist.currentContact.service)||void 0===i?void 0:i.label,this.businessprojectlist.contactdisabled||this.contactService.updatecontactinfo(this.contactlist.currentContact).subscribe((function(t){return console.log(t)})),this.contactlist.refreshdata()}},{key:"ngDoCheck",value:function(){}},{key:"setweituodanname",value:function(){}},{key:"ngAfterContentInit",value:function(){}},{key:"ngOnInit",value:function(){var t=this;setTimeout((function(){t.showTableBoolean=!0}),0),setTimeout((function(){t.showTableBooleancon=!0}),0),setTimeout((function(){t.showTableBooleanpr=!0}),0)}}]),a}(_.a),jt.\u0275fac=function(t){return new(t||jt)(o.Ib(u.a),o.Ib(d.a),o.Ib(n.a),o.Ib(h.a))},jt.\u0275cmp=o.Cb({type:jt,selectors:[["app-evirmentheath"]],viewQuery:function(t,e){var a;1&t&&(o.Cc(Lt,!0),o.Cc(Wt,!0),o.Cc(Nt,!0)),2&t&&(o.jc(a=o.Wb())&&(e.contactlist=a.first),o.jc(a=o.Wb())&&(e.businessprojectlist=a.first),o.jc(a=o.Wb())&&(e.customerlist=a.first))},features:[o.xb([l]),o.vb],decls:23,vars:5,consts:[["span","16"],["au-adaption","",1,"au-panel","au-content",3,"outerHeight"],[2,"text-align","center","font-weight","bolder","font-size","12pt"],[3,"auth","ChangeCustomer"],["customerlist",""],[3,"auth","contactChange"],["contactlist",""],["span","8"],[3,"auth","ProjectsChange"],["businessprojectlist",""]],template:function(t,e){1&t&&(o.Ob(0,"x-row"),o.Ob(1,"x-col",0),o.Ob(2,"div",1),o.Ob(3,"x-row"),o.Ob(4,"x-col",2),o.xc(5,"\u5ba2\u6237\u4fe1\u606f"),o.Nb(),o.Nb(),o.Ob(6,"x-row"),o.Ob(7,"app-customer",3,4),o.Vb("ChangeCustomer",(function(t){return e.changeCustomer(t)})),o.Nb(),o.Nb(),o.Ob(9,"x-row"),o.Ob(10,"x-col",2),o.xc(11," \u5ba2\u6237\u5408\u540c\u5217\u8868 "),o.Nb(),o.Nb(),o.Ob(12,"x-row"),o.Ob(13,"app-contact",5,6),o.Vb("contactChange",(function(t){return e.contactChange(t)})),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Ob(15,"x-col",7),o.Ob(16,"div",1),o.Ob(17,"x-row"),o.Ob(18,"x-col",2),o.xc(19," \u59d4\u6258\u5355\u57fa\u672c\u4fe1\u606f "),o.Nb(),o.Nb(),o.Ob(20,"x-row"),o.Ob(21,"app-businessproject",8,9),o.Vb("ProjectsChange",(function(t){return e.ProjectsChange(t)})),o.Nb(),o.Nb(),o.Nb(),o.Nb(),o.Nb()),2&t&&(o.yb(2),o.ec("outerHeight",50),o.yb(5),o.ec("auth",e.auth),o.yb(6),o.ec("auth",e.auth),o.yb(3),o.ec("outerHeight",50),o.yb(5),o.ec("auth",e.auth))},directives:[O.c,O.a,U.a,X,k,Bt],encapsulation:2}),jt)}],Ut=((At=function t(){_classCallCheck(this,t)}).\u0275mod=o.Gb({type:At}),At.\u0275inj=o.Fb({factory:function(t){return new(t||At)},imports:[[n.i.forChild(Kt)],n.i]}),At),qt=a("gjGi"),Vt=a("hHlV"),zt=a("873N"),St=a("iaau"),Jt=a("Z77y"),Gt=a("aMyR"),Yt=((Tt=function t(){_classCallCheck(this,t)}).\u0275mod=o.Gb({type:Tt}),Tt.\u0275inj=o.Fb({factory:function(t){return new(t||Tt)},imports:[[ut.c,Ut,Gt.a,Vt.a,st.b,E.b,J.b,ot.b,qt.a,St.a,C.b,J.b,zt.a,_t.b,Jt.b,S.b,lt.b]]}),Tt)}}])})();