!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,i){if(!t)return;if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,i)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=r(t);if(e){var a=r(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return o(this,i)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"873N":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("ofXK"),a=i("fXoL"),o=function(){var t=function t(){s(this,t)};return t.\u0275mod=a.Gb({type:t}),t.\u0275inj=a.Fb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t}()},BzWU:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("LvDl"),a=function(){var t=function(){function t(){s(this,t)}return c(t,null,[{key:"JsNewGuid",value:function(){for(var t="",e=1;e<=32;e++)t+=Math.floor(16*Math.random()).toString(16),8!=e&&12!=e&&16!=e&&20!=e||(t+="-");return t}},{key:"setafterdelete",value:function(t,e){var i=e.findIndex((function(e){return e.id==t}));return e.splice(i,1),i}},{key:"cloneobject",value:function(t){var e={};for(var i in t)e[i]=t[i];return e}},{key:"deepClone",value:function(e){var i={};if(e&&"object"==typeof e)for(var a in e)null!=e[a]&&e.hasOwnProperty(a)&&(i[a]=Object(n.isArray)(e[a])?t.deepcloneobjectarray(e[a]):e[a]&&"object"==typeof e[a]?t.deepClone(e[a]):e[a]);return i}},{key:"deepcloneobjectarray",value:function(e){for(var i=[],n=0;n<e.length;n++)i.push(t.deepClone(e[n]));return i}},{key:"cloneobjectarray",value:function(e){for(var i=[],n=0;n<e.length;n++)i.push(t.cloneobject(e[n]));return i}},{key:"GetRandomStr",value:function(t,e,i){var n="",a=e,o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];t&&(a=Math.round(Math.random()*(i-e))+e);for(var r=0;r<a;r++)n+=o[Math.round(Math.random()*(o.length-1))];return n}},{key:"RndNum",value:function(t){for(var e="",i=0;i<t;i++)e+=Math.floor(10*Math.random());return e}}]),t}();return t.num=t.RndNum(5),t}()},K7Nf:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var o=n("NtM8"),r=n("bRdP"),l=n("fXoL"),u=function(){var t=function(t){i(n,t);var e=a(n);function n(t){var i;return s(this,n),(i=e.call(this,t,{controller:{name:"inputproduct",servicetype:"businessprocess"}})).http=t,i}return c(n,[{key:"getproductbyid",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/getproductbyid",{productid:t},null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"getproduct",value:function(){var t,e;return this.http.post((null===(t=this.option.controller)||void 0===t?void 0:t.name)+"/getproduct",{},null===(e=this.option.controller)||void 0===e?void 0:e.servicetype)}},{key:"addproduct",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/addproduct",t,null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"deleteproduct",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/deleteproduct",{productid:t},null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"updateproduct",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/updateproduct",t,null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"getqualificationbyproduct",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/getqualificationbyproduct",{id:t},null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"getsearchproductlist",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/getsearchproductlist",{searchkey:t},null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}}]),n}(r.a);return t.\u0275fac=function(e){return new(e||t)(l.Sb(o.a))},t.\u0275prov=l.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},M3sX:function(t,e,n){"use strict";n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return f}));var o=n("bRdP"),r=n("NtM8"),l=n("fXoL"),u=function(){var t=function(t){i(n,t);var e=a(n);function n(t){var i;return s(this,n),(i=e.call(this,t,{controller:{name:"testprojects",servicetype:"businessprocess"}})).http=t,i}return c(n,[{key:"getprojectsbylevel",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/getprojectsbylevel",{level:t},null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"getprojectsbypid",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/getprojectsbypid",{pid:t},null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"getalltestProject",value:function(){var t,e;return this.http.post((null===(t=this.option.controller)||void 0===t?void 0:t.name)+"/getalltestProject",{},null===(e=this.option.controller)||void 0===e?void 0:e.servicetype)}}]),n}(o.a);return t.\u0275fac=function(e){return new(e||t)(l.Sb(r.a))},t.\u0275prov=l.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),d=function(){var t=function(t){i(n,t);var e=a(n);function n(t){var i;return s(this,n),(i=e.call(this,t,{controller:{name:"qualifications",servicetype:"businessprocess"}})).http=t,i}return c(n,[{key:"getqualificationbysearchkey",value:function(t,e,i){var n,a;return this.http.post((null===(n=this.option.controller)||void 0===n?void 0:n.name)+"/getqualificationbysearchkey",{companyid:t,project:e,method:i},null===(a=this.option.controller)||void 0===a?void 0:a.servicetype)}},{key:"addqualification",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/addqualification",t,null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"updatequalification",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/updatequalification",t,null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}},{key:"deletequalification",value:function(t){var e,i;return this.http.post((null===(e=this.option.controller)||void 0===e?void 0:e.name)+"/deletequalification",{qualificationid:t},null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}}]),n}(o.a);return t.\u0275fac=function(e){return new(e||t)(l.Sb(r.a))},t.\u0275prov=l.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),h=function(){var t=function(t){i(n,t);var e=a(n);function n(t){var i;return s(this,n),(i=e.call(this,t,{controller:{name:"qualificationsid",servicetype:"businessprocess"}})).http=t,i}return c(n,[{key:"getqualifications",value:function(t){var e,i;return this.http.post(""+(null===(e=this.option.controller)||void 0===e?void 0:e.name),t,null===(i=this.option.controller)||void 0===i?void 0:i.servicetype)}}]),n}(o.a);return t.\u0275fac=function(e){return new(e||t)(l.Sb(r.a))},t.\u0275prov=l.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),b=function(){var t=function(t){i(n,t);var e=a(n);function n(t){var i;return s(this,n),(i=e.call(this,t,{controller:{name:"qualificationcompanys",servicetype:"businessprocess"}})).http=t,i}return n}(o.a);return t.\u0275fac=function(e){return new(e||t)(l.Sb(r.a))},t.\u0275prov=l.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),f=function(){var t=function(t){i(n,t);var e=a(n);function n(t){var i;return s(this,n),(i=e.call(this,t,{controller:{name:"domains",servicetype:"businessprocess"}})).http=t,i}return n}(o.a);return t.\u0275fac=function(e){return new(e||t)(l.Sb(r.a))},t.\u0275prov=l.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},MOn6:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("XNiG"),a=i("3pM9"),o=i("1G5W"),r=i("ofXK"),l=i("fXoL"),u=function(){var t=function(){function t(e,i,a){s(this,t),this.elementRef=e,this.renderer=i,this.doc=a,this.outerHeight=0,this._unSubject=new n.a}return c(t,[{key:"ngAfterViewInit",value:function(){this.setSubject()}},{key:"ngOnDestroy",value:function(){var t;this._unSubject.next(),this._unSubject.unsubscribe(),null===(t=this._resizeObserver)||void 0===t||t.disconnect()}},{key:"setSubject",value:function(){var t=this;Object(a.A)(this.container,this.doc.documentElement).pipe(Object(o.a)(this._unSubject)).subscribe((function(e){t._resizeObserver=e.resizeObserver,t.setAdaptionHeight()}))}},{key:"setAdaptionHeight",value:function(){this.renderer.setStyle(this.elementRef.nativeElement,"height",this.doc.documentElement.clientHeight-this.outerHeight+"px")}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Ib(l.l),l.Ib(l.D),l.Ib(r.e))},t.\u0275dir=l.Db({type:t,selectors:[["","au-adaption",""]],inputs:{outerHeight:"outerHeight",container:"container"}}),t}()},OROO:function(e,i,n){"use strict";n.d(i,"a",(function(){return E}));var a,o=n("3Pt+"),r=n("BzWU"),l=n("K7Nf"),u=n("fXoL"),d=n("M3sX"),h=n("SfH5"),b=n("oJeN"),f=n("P0lq"),p=n("GvSL"),v=((a=function(){function t(e,i){s(this,t),this.service=e,this.qualificationservice=i,this.projectname="",this.SaveQualification=new u.n,this.companyid=1,this.currentquali={},this.type="info",this.firstseldata=[],this.firstsel="0",this.oldfirstsel="0",this.price=0,this.categorydata=[],this.categorysel="0",this.methodname="",this.standardname=""}return c(t,[{key:"ngDoCheck",value:function(){null!=this.firstsel&&this.firstsel!=this.oldfirstsel&&this.getsceconddata()}},{key:"ngOnInit",value:function(){this.getfirsdata()}},{key:"getfirsdata",value:function(){var t=this;this.service.getprojectsbylevel(1).subscribe((function(e){t.firstseldata=e,null!=t.firstseldata&&null!=t.firstseldata&&t.firstseldata.length>0&&(t.firstsel=t.firstseldata[0].id)}))}},{key:"getsceconddata",value:function(){var t=this;this.service.getprojectsbypid(this.firstsel+"").subscribe((function(e){t.categorydata=e,null!=t.categorydata&&null!=t.categorydata&&t.categorydata.length>0&&(t.categorysel=t.categorydata[0].id,t.oldfirstsel=t.firstsel)}))}},{key:"savedata",value:function(){var t=this;"add"==this.type?this.qualificationservice.addqualification({qualifiedid:this.firstsel,parentprojectid:this.categorysel,TestProject:this.projectname,testprojectid:null,standardid:null,methodname:this.methodname,standardname:this.standardname,methodid:null,price:this.price,companyid:this.companyid}).subscribe((function(e){null!=t.SaveQualification&&t.SaveQualification.emit(e)})):"edit"==this.type&&this.qualificationservice.updatequalification({qualifiedid:this.firstsel,parentprojectid:this.categorysel,qualificationid:this.currentquali.id+"",standardid:this.currentquali.standardid+"",TestProject:this.projectname,testprojectid:this.currentquali.testprojectid+"",methodname:this.methodname,methodid:this.currentquali.methodid+"",price:this.price,companyid:this.companyid,standardname:this.standardname}).subscribe((function(e){null!=t.SaveQualification&&t.SaveQualification.emit(e)}))}},{key:"setqualificaiotndata",value:function(t,e){this.type=t,null!=e&&(this.currentquali=e,this.firstsel=e.firstid+"",this.categorysel=e.secondid+"",this.projectname=e.testproject,this.price=e.price,this.methodname=e.methodname,this.standardname=e.standardname)}},{key:"disabled",get:function(){return null==this.projectname||""==this.projectname||null==this.standardname||""==this.standardname||!!isNaN(this.price)}}]),t}()).\u0275fac=function(t){return new(t||a)(u.Ib(d.e),u.Ib(d.a))},a.\u0275cmp=u.Cb({type:a,selectors:[["app-addqualificaiton"]],outputs:{SaveQualification:"SaveQualification"},decls:22,vars:9,consts:[["span","20"],["label","\u8d44\u8d28",3,"data","ngModel","ngModelChange"],["label","\u7c7b\u522b",3,"data","ngModel","ngModelChange"],["label","\u9879\u76ee\u540d\u79f0","required","true",3,"ngModel","ngModelChange"],["label","\u6807\u51c6","required","true",3,"ngModel","ngModelChange"],["label","\u65b9\u6cd5",3,"ngModel","ngModelChange"],["span","15"],["label","\u62a5\u4ef7","required","true",3,"ngModel","ngModelChange"],["justify","center"],["icon","fto-save","type","primary","plain","",3,"disabled","click"]],template:function(t,e){1&t&&(u.Ob(0,"x-row"),u.Ob(1,"x-col",0),u.Ob(2,"x-select",1),u.Vb("ngModelChange",(function(t){return e.firstsel=t})),u.Nb(),u.Nb(),u.Nb(),u.Ob(3,"x-row"),u.Ob(4,"x-col",0),u.Ob(5,"x-select",2),u.Vb("ngModelChange",(function(t){return e.categorysel=t})),u.Nb(),u.Nb(),u.Nb(),u.Ob(6,"x-row"),u.Ob(7,"x-col",0),u.Ob(8,"x-input",3),u.Vb("ngModelChange",(function(t){return e.projectname=t})),u.Nb(),u.Nb(),u.Nb(),u.Ob(9,"x-row"),u.Ob(10,"x-col",0),u.Ob(11,"x-input",4),u.Vb("ngModelChange",(function(t){return e.standardname=t})),u.Nb(),u.Nb(),u.Nb(),u.Ob(12,"x-row"),u.Ob(13,"x-col",0),u.Ob(14,"x-input",5),u.Vb("ngModelChange",(function(t){return e.methodname=t})),u.Nb(),u.Nb(),u.Nb(),u.Ob(15,"x-row"),u.Ob(16,"x-col",6),u.Ob(17,"x-input",7),u.Vb("ngModelChange",(function(t){return e.price=t})),u.Nb(),u.Nb(),u.Nb(),u.Ob(18,"x-row",8),u.Ob(19,"x-col",0),u.Ob(20,"x-button",9),u.Vb("click",(function(){return!e.disabled&&e.savedata()})),u.wc(21,"\u4fdd\u5b58"),u.Nb(),u.Nb(),u.Nb()),2&t&&(u.yb(2),u.ec("data",e.firstseldata)("ngModel",e.firstsel),u.yb(3),u.ec("data",e.categorydata)("ngModel",e.categorysel),u.yb(3),u.ec("ngModel",e.projectname),u.yb(3),u.ec("ngModel",e.standardname),u.yb(3),u.ec("ngModel",e.methodname),u.yb(3),u.ec("ngModel",e.price),u.yb(3),u.ec("disabled",e.disabled))},directives:[h.c,h.a,b.a,o.q,o.t,f.a,o.B,p.a],styles:[""]}),a),y=n("x6Xy"),g=n("qMpK"),m=n("l5Yv"),k=n("Prn+"),x=n("/pOC"),q=n("MOn6"),O=n("yO6f"),w=n("ofXK"),N=n("kXfN"),C=["treeCom"],j=["producttreeCom"],M=["qualtable"],I=["addqualificaiton"],S=["rrow"];function V(t,e){if(1&t){var i=u.Pb();u.Ob(0,"x-row"),u.Ob(1,"x-col",28),u.wc(2),u.Nb(),u.Ob(3,"x-col",29),u.Ob(4,"div"),u.Ob(5,"x-input",17),u.Vb("ngModelChange",(function(t){return u.lc(i),e.$implicit.testcount=t})),u.Nb(),u.Nb(),u.Nb(),u.Ob(6,"x-col",30),u.Ob(7,"x-link",31),u.Vb("click",(function(){u.lc(i);var t=e.$implicit;return u.Yb().delsel(t)})),u.Nb(),u.Nb(),u.Nb()}if(2&t){var n=e.$implicit,a=u.Yb();u.yb(2),u.xc(n.testproject),u.yb(2),u.rc("display",a.inputtestcount),u.yb(1),u.ec("ngModel",n.testcount)}}function A(t,e){if(1&t){var i=u.Pb();u.Ob(0,"div",32),u.Ob(1,"x-link",33),u.Vb("click",(function(){u.lc(i);var t=e.$row,n=u.Yb();return!n.disabled&&n.add("edit",t)})),u.Nb(),u.Ob(2,"x-link",34),u.Vb("click",(function(){u.lc(i);var t=e.$row,n=u.Yb();return!n.disabled&&n.add("delete",t)})),u.Nb(),u.Nb()}if(2&t){var n=u.Yb();u.yb(1),u.ec("disabled",n.disabled),u.yb(1),u.ec("disabled",n.disabled)}}var P=function(){return{label:"\u5168\u9009",value:!0}},D=function(t){return[t]};function _(t,e){if(1&t){var i=u.Pb();u.Ob(0,"x-checkbox",35),u.Vb("ngModelChange",(function(t){return u.lc(i),u.Yb().checkedAll=t}))("ngModelChange",(function(){return u.lc(i),u.Yb().checkedAllChange()})),u.Nb()}if(2&t){var n=u.Yb();u.ec("data",u.gc(3,D,u.fc(2,P)))("ngModel",n.checkedAll)}}var H,R=function(t){return{actions:t}},z=function(t){return{checkbox:t}},E=((H=function(){function e(t,i,n,a,r,l,c,u){s(this,e),this.service=t,this.qualservice=i,this.productService=n,this.cdr=a,this.comanyservice=r,this.Qualifis=l,this.msgBox=c,this.msg=u,this.projectsearchkey="",this.methodsearchkey="",this.productsearchkey="",this.addvisible=!1,this.checkedAll=!1,this.formGroup=new o.j({}),this.selquali=[],this.treeLoading=!0,this.tablespan=19,this.treespan=5,this.modify=0,this.tabledata=[],this.tablealldata=[],this.tableindex=1,this.tabletotal=0,this.tablesize=20,this.tablequery={},this.tablecolumns=[{id:"checkbox",type:"checkbox",label:"\u5168\u9009",width:80},{id:"index",label:"\u5e8f\u53f7",width:80,type:"index",flex:1},{id:"testproject",label:"\u9879\u76ee",width:150},{id:"standardname",label:"\u6807\u51c6",width:500},{id:"methodname",label:"\u65b9\u6cd5",width:300},{id:"price",label:"\u4ef7\u683c",width:100}],this.productdata=[],this.producthidden="none",this.qualitreeheight="600px",this.inputtestcount="inline",this.displayselquli="inline",this.companydata=[],this.company=1,this.oldcompany=1}return c(e,[{key:"productsearch",value:function(){var t=this;""!=this.productsearchkey?this.productService.getsearchproductlist(this.productsearchkey).subscribe((function(e){t.productdata=e.list})):this.productService.getproduct().subscribe((function(e){t.productdata=e.list}))}},{key:"search",value:function(){var t=this;this.checkedAll=!1,(""!=this.projectsearchkey||this.methodsearchkey)&&this.qualservice.getqualificationbysearchkey(this.company,this.projectsearchkey,this.methodsearchkey).subscribe((function(e){t.tablealldata=e,t.tableindex=1,t.tablequery={filter:[]},t.gettableData()}))}},{key:"add",value:function(e,i){var n=this;this.type=e,"delete"!=e?(this.addvisible=!0,null!=this.addqualificaiton&&(this.addqualificaiton.companyid=this.company),"add"==e&&(i={firstid:616,secondid:617}),this.addqualificaiton.setqualificaiotndata(e,i)):this.msgBox.confirm({title:"\u63d0\u793a",content:"\u6b64\u64cd\u4f5c\u5c06\u6c38\u4e45\u5220\u9664\u6b64\u6761\u6570\u636e\uff1a".concat(null==i?void 0:i.testproject,"\uff0c\u662f\u5426\u7ee7\u7eed\uff1f"),type:"warning",callback:function(e){"confirm"===e&&null!=i&&n.qualservice.deletequalification(i.id+"").subscribe((function(e){var a=n.tablealldata.findIndex((function(t){return t.id==(null==i?void 0:i.id)}));-1!=a&&n.tablealldata.splice(a,1),-1!=(a=n.tabledata.findIndex((function(t){return t.id==(null==i?void 0:i.id)})))&&(n.tabledata.splice(a,1),n.tabledata=t(n.tabledata))}))}})}},{key:"handleadd",value:function(){}},{key:"delsel",value:function(t){var e=this.selquali.findIndex((function(e){return e.id==t.id}));-1!=e&&(this.selquali.splice(e,1),this.gettableData())}},{key:"refreshdata",value:function(){this.gettableData()}},{key:"checkedAllChange",value:function(){var e=this;this.checkedAll?null!=this.selquali&&this.tabledata.map((function(t){t.checkbox=!0,-1==e.selquali.findIndex((function(e){return e.id==t.id}))&&e.selquali.push(t)})):null!=this.selquali&&this.tabledata.map((function(t){t.checkbox=!1;var i=e.selquali.findIndex((function(e){return e.id==t.id}));-1!=i&&e.selquali.splice(i,1)})),this.tabledata=t(this.tabledata),this.selquali=t(this.selquali)}},{key:"ngAfterContentInit",value:function(){this.getData(!1)}},{key:"action",value:function(t){this.selected=t,this.tableindex=1,this.gettableallData(t.id),this.checkedAll=!1}},{key:"productaction",value:function(t){var e=this;this.productSelected=t,this.productService.getqualificationbyproduct(t.id).subscribe((function(t){e.tablealldata=t.list,e.tabletotal=t.total,e.tableindex=1,e.tablesize=20,e.tablequery={},e.gettableData(),e.checkedAll=!1}))}},{key:"ngDoCheck",value:function(){null!=this.company&&this.company!=this.oldcompany&&(this.tableindex=1,this.tablesize=1e3,this.oldcompany=this.company,null!=this.data&&this.data.length>0&&this.gettableallData(this.data[0].id))}},{key:"checkproductaction",value:function(t){var e=this;this.productSelected=t,this.productService.getqualificationbyproduct(t.id).subscribe((function(i){var n,a;e.tablealldata=i.list,e.tabletotal=i.total,e.tableindex=1,e.tablesize=20,e.tablequery={},e.gettableData(),t.checked?null===(n=t.testprojects)||void 0===n||n.map((function(t){-1==e.selquali.findIndex((function(e){return e.id==t.qualificationid}))&&e.selquali.push({id:t.qualificationid,testproject:t.testprojectname,methodname:t.methodname,testcount:1})})):null===(a=t.testprojects)||void 0===a||a.map((function(t){var i=e.selquali.findIndex((function(e){return e.id==t.qualificationid}));-1!=i&&e.selquali.splice(i,1)})),e.gettableData()}))}},{key:"ngAfterViewInit",value:function(){0==this.modify&&(this.tablecolumns=[{id:"actions",label:"\u64cd\u4f5c",width:80},{id:"testproject",label:"\u9879\u76ee",width:150},{id:"standardname",label:"\u6807\u51c6",width:600},{id:"methodname",label:"\u65b9\u6cd5",width:150},{id:"price",label:"\u4ef7\u683c",width:100}])}},{key:"ngOnInit",value:function(){}},{key:"getData",value:function(e){var i=this;"none"!=this.producthidden&&this.productService.getproduct().subscribe((function(t){i.productdata=t.list})),this.service.getList(1,Number.MAX_SAFE_INTEGER).subscribe((function(n){if(i.data=n.list,e){var a=document.getElementById("selcompany"),o=i.tablecolumns.findIndex((function(t){return"projectsort"===t.id})),r=!1;-1!=o&&(i.tablecolumns.splice(o,1),r=!0),-1!=(o=i.tablecolumns.findIndex((function(t){return"methodname"===t.id})))&&(i.tablecolumns.splice(o,1),r=!0),-1!=(o=i.tablecolumns.findIndex((function(t){return"limitcomment"===t.id})))&&(i.tablecolumns.splice(o,1),r=!0),-1!=(o=i.tablecolumns.findIndex((function(t){return"price"===t.id})))&&(i.tablecolumns.splice(o,1),r=!0),r&&(i.tablecolumns=t(i.tablecolumns)),i.cdr.detectChanges(),null!=a&&(a.style.display="inline",i.comanyservice.getList(1,20,{}).subscribe((function(t){i.companydata=t.list,i.company=Number(i.companydata[0].id)})))}else i.gettableallData(i.data[0].id)}))}},{key:"gettableallData",value:function(t){var e=this;this.tableindex=1,this.tablequery={filter:[{field:"id",value:t,operation:"="},{field:"companyid",value:this.company+"",operation:"="}]},this.qualservice.getList(this.tableindex,this.tablesize,this.tablequery).subscribe((function(t){e.tablealldata=t.list,console.log(t),e.tablequery={},e.gettableData()}))}},{key:"SaveQualification",value:function(e){if("add"==this.type)null!=this.selquali&&this.selquali.push(e),this.tabledata.push(e),this.tableindex=1,this.gettableallData(e.secondid);else if("edit"==this.type){var i=this.tablealldata.findIndex((function(t){return t.id==e.id}));-1!=i&&(this.tablealldata[i]=r.a.deepClone(e)),-1!=(i=this.tabledata.findIndex((function(t){return t.id==e.id})))&&(this.tabledata[i]=r.a.deepClone(e)),this.tabledata=t(this.tabledata)}this.addvisible=!1}},{key:"tablerowchange",value:function(e){var i=this.selquali.findIndex((function(t){return t.testprojectid==e.testprojectid&&t.methodid==e.methodid}));console.log(e),-1==i&&e.checkbox?this.selquali.push(r.a.cloneobject(e)):!e.checkbox&&i>=0&&this.selquali.splice(i,1),this.selquali=t(this.selquali)}},{key:"gettableData",value:function(){var e=this;this.selquali.length>0&&this.Qualifis.getqualifications(this.selquali).subscribe((function(i){i.map((function(t){var i=e.selquali.findIndex((function(e){return e.id==t.id}));if(-1!=i){var n=e.selquali[i].testcount;e.selquali[i]=r.a.cloneobject(t),e.selquali[i].testcount=n}})),e.selquali=t(e.selquali)})),this.qualservice.gethandledata(this.tablealldata,this.tableindex,this.tablesize,this.tablequery).subscribe((function(i){e.tabletotal=Number(i.total),e.tabledata=t(i.list),null!=i.list&&i.list.map((function(t){var i=e.selquali.findIndex((function(e){return e.id==t.id}));t.checkbox=-1!=i}))}))}},{key:"indexChange",value:function(t){this.tablequery={},this.tableindex=t,this.gettableData(),this.checkedAll=!1}},{key:"sortChange",value:function(t){this.tablequery={},this.tablequery.sort=t,this.gettableData()}},{key:"disabled",get:function(){return!1}}]),e}()).\u0275fac=function(t){return new(t||H)(u.Ib(d.e),u.Ib(d.a),u.Ib(l.a),u.Ib(u.h),u.Ib(d.c),u.Ib(d.b),u.Ib(y.c),u.Ib(g.c))},H.\u0275cmp=u.Cb({type:H,selectors:[["app-qualification"]],viewQuery:function(t,e){var i;1&t&&(u.Bc(C,!0),u.Bc(j,!0),u.Bc(M,!0),u.Bc(I,!0),u.Bc(S,!0)),2&t&&(u.ic(i=u.Wb())&&(e.treeCom=i.first),u.ic(i=u.Wb())&&(e.producttreeCom=i.first),u.ic(i=u.Wb())&&(e.qualtable=i.first),u.ic(i=u.Wb())&&(e.addqualificaiton=i.first),u.ic(i=u.Wb())&&(e.rrow=i.first))},inputs:{tablespan:"tablespan",treespan:"treespan",modify:"modify",producthidden:"producthidden",qualitreeheight:"qualitreeheight",inputtestcount:"inputtestcount",displayselquli:"displayselquli"},decls:54,vars:40,consts:[["width","20%","height","30%","placement","top",3,"visible","showConfirm","showCancel","backdropClose","hasBackdrop","visibleChange"],["Seldialog",""],[2,"height","100%","width","100%",3,"SaveQualification"],["addqualificaiton",""],["span","10"],["id","selcompany",2,"display","none"],["label","\u516c\u53f8","direction","row",3,"data","ngModel","ngModelChange"],["span","5"],["label","\u9879\u76ee","direction","row",3,"ngModel","ngModelChange"],["label","\u6d4b\u8bd5\u6807\u51c6","direction","row",3,"ngModel","ngModelChange"],["span","4"],["title","\u67e5\u8be2","icon","ado-search","plain","",2,"color","blue",3,"click"],["icon","ado-plus","plain","",2,"color","blue",3,"click"],[3,"span"],[2,"overflow","scroll"],["au-adaption","","expandedLevel","0",3,"outerHeight","data","activatedId","nodeHeight","activatedChange"],["treeCom",""],[3,"ngModel","ngModelChange"],["title","\u67e5\u8be2\u4ea7\u54c1","icon","ado-search","plain","",2,"color","blue",3,"click"],[2,"overflow","scroll","height","200px"],["au-adaption","","expandedLevel","0",3,"outerHeight","data","activatedId","nodeHeight","activatedChange","checkboxChange"],["producttreeCom",""],["scrollYWidth","50","loading","","adaptionHeight","200",3,"columns","data","size","total","index","query","bodyColumnTpl","headColumnTpl","virtualScroll","sizeChange","indexChange","sortChange","activatedRowChange"],["qualtable",""],[2,"overflow","scroll","height","670px"],[4,"ngFor","ngForOf"],["actionsTpl",""],["headerTpl",""],["span","15"],["span","7"],["span","2"],["icon","ado-close","title","\u5220\u9664",2,"color","red",3,"click"],[1,"au-table-actions"],["icon","fto-edit","title","\u4fee\u6539",3,"disabled","click"],["icon","fto-trash-2","title","\u5220\u9664",3,"disabled","click"],[3,"data","ngModel","ngModelChange"]],template:function(t,e){if(1&t&&(u.Ob(0,"x-dialog",0,1),u.Vb("visibleChange",(function(t){return e.addvisible=t})),u.Ob(2,"app-addqualificaiton",2,3),u.Vb("SaveQualification",(function(t){return e.SaveQualification(t)})),u.Nb(),u.Nb(),u.Ob(4,"x-row"),u.Ob(5,"x-col",4),u.Ob(6,"div",5),u.Ob(7,"x-select",6),u.Vb("ngModelChange",(function(t){return e.company=t})),u.Nb(),u.Nb(),u.Nb(),u.Ob(8,"x-col",7),u.Ob(9,"x-input",8),u.Vb("ngModelChange",(function(t){return e.projectsearchkey=t})),u.Nb(),u.Nb(),u.Ob(10,"x-col",7),u.Ob(11,"x-input",9),u.Vb("ngModelChange",(function(t){return e.methodsearchkey=t})),u.Nb(),u.Nb(),u.Ob(12,"x-col",10),u.Ob(13,"x-button",11),u.Vb("click",(function(){return e.search()})),u.wc(14,"\u67e5\u8be2"),u.Nb(),u.Nb(),u.Ob(15,"x-col",10),u.Ob(16,"x-button",12),u.Vb("click",(function(){return e.add("add")})),u.wc(17,"\u6dfb\u52a0\u9879\u76ee"),u.Nb(),u.Nb(),u.Nb(),u.Ob(18,"x-row"),u.Ob(19,"x-col",13),u.Ob(20,"x-row"),u.Ob(21,"h4"),u.Ob(22,"span"),u.wc(23,"\u8d44\u8d28\u6811"),u.Nb(),u.Nb(),u.Ob(24,"div",14),u.Ob(25,"x-tree",15,16),u.Vb("activatedChange",(function(t){return e.action(t)})),u.Nb(),u.Nb(),u.Nb(),u.Ob(27,"x-row"),u.Ob(28,"div"),u.Ob(29,"x-row"),u.Ob(30,"h4"),u.Ob(31,"span"),u.wc(32,"\u4ea7\u54c1\u6811"),u.Nb(),u.Nb(),u.Nb(),u.Ob(33,"x-row"),u.Ob(34,"x-col",4),u.Ob(35,"x-input",17),u.Vb("ngModelChange",(function(t){return e.productsearchkey=t})),u.Nb(),u.Nb(),u.Ob(36,"x-col",10),u.Ob(37,"x-button",18),u.Vb("click",(function(){return e.productsearch()})),u.wc(38,"\u67e5\u8be2\u4ea7\u54c1"),u.Nb(),u.Nb(),u.Nb(),u.Ob(39,"x-row"),u.Ob(40,"div",19),u.Ob(41,"x-tree",20,21),u.Vb("activatedChange",(function(t){return e.productaction(t)}))("checkboxChange",(function(t){return e.checkproductaction(t)})),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Ob(43,"x-col",13),u.Ob(44,"x-table",22,23),u.Vb("sizeChange",(function(t){return e.tablesize=t}))("indexChange",(function(t){return e.tableindex=t}))("indexChange",(function(t){return e.indexChange(t)}))("sortChange",(function(t){return e.sortChange(t)}))("activatedRowChange",(function(t){return e.tablerowchange(t)})),u.Nb(),u.Nb(),u.Ob(46,"x-col",10),u.Ob(47,"div"),u.Ob(48,"div",24),u.uc(49,V,8,4,"x-row",25),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.uc(50,A,3,2,"ng-template",null,26,u.vc),u.uc(52,_,1,5,"ng-template",null,27,u.vc)),2&t){var i=u.jc(51),n=u.jc(53);u.ec("visible",e.addvisible)("showConfirm",!1)("showCancel",!1)("backdropClose",!1)("hasBackdrop",!1),u.yb(7),u.ec("data",e.companydata)("ngModel",e.company),u.yb(2),u.ec("ngModel",e.projectsearchkey),u.yb(2),u.ec("ngModel",e.methodsearchkey),u.yb(8),u.ec("span",e.treespan),u.yb(5),u.rc("height",e.qualitreeheight),u.yb(1),u.ec("outerHeight",50)("data",e.data)("activatedId",e.activatedId)("nodeHeight",1.875),u.yb(3),u.rc("display",e.producthidden),u.yb(7),u.ec("ngModel",e.productsearchkey),u.yb(6),u.ec("outerHeight",50)("data",e.productdata)("activatedId",e.productactivatedId)("nodeHeight",1.875),u.yb(2),u.ec("span",e.tablespan),u.yb(1),u.ec("columns",e.tablecolumns)("data",e.tabledata)("size",e.tablesize)("total",e.tabletotal)("index",e.tableindex)("query",e.tablequery)("bodyColumnTpl",u.gc(36,R,i))("headColumnTpl",u.gc(38,z,n))("virtualScroll",!0),u.yb(3),u.rc("display",e.displayselquli),u.yb(2),u.ec("ngForOf",e.selquali)}},directives:[m.a,v,h.c,h.a,b.a,o.q,o.t,f.a,p.a,x.a,q.a,O.a,w.s,N.a,k.a],styles:["[_nghost-%COMP%]   .row[_ngcontent-%COMP%]:not(:first-child){margin-top:1rem}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]   x-tag[_ngcontent-%COMP%]:not(:first-child){margin-left:1rem}"]}),H)},aMyR:function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i("ofXK"),a=i("gjGi"),o=i("GvSL"),r=i("oJeN"),l=i("/pOC"),c=i("l5Yv"),u=i("qN0K"),d=i("4h90"),h=i("P0lq"),b=i("Prn+"),f=i("hHlV"),p=i("873N"),v=i("iaau"),y=i("fXoL"),g=function(){var t=function t(){s(this,t)};return t.\u0275mod=y.Gb({type:t}),t.\u0275inj=y.Fb({factory:function(e){return new(e||t)},imports:[[n.c,a.a,o.b,f.a,p.a,v.a,r.b,l.b,c.b,u.b,d.b,h.b,b.b],n.c]}),t}()},iaau:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("fXoL"),a=function(){var t=function t(){s(this,t)};return t.\u0275mod=n.Gb({type:t}),t.\u0275inj=n.Fb({factory:function(e){return new(e||t)}}),t}()}}])}();