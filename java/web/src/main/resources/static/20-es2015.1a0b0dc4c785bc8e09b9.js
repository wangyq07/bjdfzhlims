(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"873N":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("ofXK"),s=i("fXoL");let a=(()=>{class t{}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})()},K7LP:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class n{constructor(t){this.indexService=t,this.auth={};let e=this.indexService.menuChange.subscribe(t=>{this.baseInit(),e.unsubscribe()})}baseInit(){var t,e,i,n,s;this.menu=null===(e=null===(t=this.indexService.auth.user.permissions)||void 0===t?void 0:t.menus)||void 0===e?void 0:e.find(t=>t.router==this.indexService.session.activatedPage),this.actions=null===(n=null===(i=this.indexService.auth.user.permissions)||void 0===i?void 0:i.actions)||void 0===n?void 0:n.filter(t=>{var e;return t.menuId==(null===(e=this.menu)||void 0===e?void 0:e.id)}),null===(s=this.actions)||void 0===s||s.forEach(t=>this.auth[t.code]=!0)}unAuth(t){return!this.auth[t]}}},MOn6:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("XNiG"),s=i("3pM9"),a=i("1G5W"),o=i("ofXK"),r=i("fXoL");let u=(()=>{class t{constructor(t,e,i){this.elementRef=t,this.renderer=e,this.doc=i,this.outerHeight=0,this._unSubject=new n.a}ngAfterViewInit(){this.setSubject()}ngOnDestroy(){var t;this._unSubject.next(),this._unSubject.unsubscribe(),null===(t=this._resizeObserver)||void 0===t||t.disconnect()}setSubject(){Object(s.A)(this.container,this.doc.documentElement).pipe(Object(a.a)(this._unSubject)).subscribe(t=>{this._resizeObserver=t.resizeObserver,this.setAdaptionHeight()})}setAdaptionHeight(){this.renderer.setStyle(this.elementRef.nativeElement,"height",this.doc.documentElement.clientHeight-this.outerHeight+"px")}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.l),r.Ib(r.D),r.Ib(o.e))},t.\u0275dir=r.Db({type:t,selectors:[["","au-adaption",""]],inputs:{outerHeight:"outerHeight",container:"container"}}),t})()},Oqvg:function(t,e,i){"use strict";i.r(e),i.d(e,"WaittaskModule",(function(){return O}));var n=i("ofXK"),s=i("wTjX"),a=i("TPaT"),o=i("Puy/"),r=i("K7LP"),u=i("fXoL"),c=i("tyNb"),l=i("SfH5"),d=i("MOn6"),h=i("yO6f"),b=i("kXfN");const f=["tableCom"];function g(t,e){if(1&t){const t=u.Pb();u.Ob(0,"div",6),u.Ob(1,"x-link",7),u.Vb("click",(function(){u.lc(t);const i=e.$row,n=u.Yb();return n.auth.info&&n.action("info",i)})),u.Nb(),u.Nb()}if(2&t){const t=u.Yb();u.yb(1),u.ec("disabled",!t.auth.info)}}const v=function(t){return{actions:t}},p=[{path:"",component:(()=>{class t extends r.a{constructor(t,e,i,n,s){super(t),this.indexService=t,this.flowservice=e,this.router=i,this.activatedRoute=n,this.globalaudit=s,this.index=1,this.size=1e4,this.total=0,this.query={},this.columns=[{id:"index",label:"\u5e8f\u53f7",width:80,type:"index"},{id:"actions",label:"\u64cd\u4f5c",width:100},{id:"name",label:"\u4efb\u52a1",width:100,sort:!0},{id:"customername",label:"\u5ba2\u6237",width:150,sort:!0},{id:"preuser",label:"\u524d\u7f6e\u5904\u7406\u4eba",width:200,sort:!0},{id:"createtime",label:"\u521b\u5efa\u65e5\u671f",width:200,sort:!0},{id:"from",label:"\u4e0a\u4e00\u8282\u70b9",width:100,sort:!0}],this.globalaudit.auditResult.subscribe(t=>this.HandleAuditResult),n.params.subscribe(t=>{t.refreshdata&&this.getData()})}HandleAuditResult(t){console.log(t),this.getData()}ngAfterViewInit(){console.log(this.indexService.auth.user),null!=this.indexService.auth.user.roles&&this.getData()}ngOnInit(){}action(t,e){this.router.navigate([""+e.router,{contactid:e.contactid,taskid:e.taskid}])}browsediagram(t){this.query={filter:[{field:"instanceid",value:t.instanceid+"",operation:"="}]},this.flowservice.getDiagram(this.query).subscribe(t=>{var e=document.getElementById("svg_my");e&&(e.innerHTML=t.output)})}activatedRow(t){this.browsediagram(t)}getData(){null!=this.indexService.auth.user.roles&&this.flowservice.getTaskListByRoleId(this.indexService.auth.user.roles).subscribe(t=>{console.log(t),null!=t.list&&([this.data,this.total]=[t.list,t.list.length])})}indexChange(t){this.index=t,this.getData()}sortChange(t){this.query.sort=t,this.getData()}}return t.\u0275fac=function(e){return new(e||t)(u.Ib(s.a),u.Ib(a.a),u.Ib(c.e),u.Ib(c.a),u.Ib(o.a))},t.\u0275cmp=u.Cb({type:t,selectors:[["app-waittask"]],viewQuery:function(t,e){var i;1&t&&u.Bc(f,!0),2&t&&u.ic(i=u.Wb())&&(e.tableCom=i.first)},features:[u.vb],decls:8,vars:12,consts:[["span","8"],["au-adaption","",1,"au-panel","au-content",3,"outerHeight"],["loading","",3,"columns","data","index","size","total","virtualScroll","bodyColumnTpl","bodyHeight","indexChange","sizeChange","sortChange","activatedRowChange"],["span","16"],["id","svg_my","au-adaption","",1,"au-panel","au-content",3,"outerHeight"],["actionsTpl",""],[1,"au-table-actions"],["icon","fto-eye","title","\u63d0\u4ea4",2,"color","green",3,"disabled","click"]],template:function(t,e){if(1&t&&(u.Ob(0,"x-row"),u.Ob(1,"x-col",0),u.Ob(2,"div",1),u.Ob(3,"x-table",2),u.Vb("indexChange",(function(t){return e.index=t}))("sizeChange",(function(t){return e.size=t}))("indexChange",(function(t){return e.indexChange(t)}))("sortChange",(function(t){return e.sortChange(t)}))("activatedRowChange",(function(t){return e.activatedRow(t)})),u.Nb(),u.Nb(),u.Nb(),u.Ob(4,"x-col",3),u.Jb(5,"div",4),u.Nb(),u.Nb(),u.uc(6,g,2,1,"ng-template",null,5,u.vc)),2&t){const t=u.jc(7);u.yb(2),u.ec("outerHeight",50),u.yb(1),u.ec("columns",e.columns)("data",e.data)("index",e.index)("size",e.size)("total",e.total)("virtualScroll",!0)("bodyColumnTpl",u.gc(10,v,t))("bodyHeight",750),u.yb(2),u.ec("outerHeight",50)}},directives:[l.c,l.a,d.a,h.a,b.a],styles:[""],encapsulation:2}),t})()},{path:"menus",component:i("IOW9").a}];let m=(()=>{class t{}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(p)],c.i]}),t})();var w=i("hHlV"),y=i("gjGi"),x=i("873N"),C=i("iaau");const S=[n.c,w.a,y.a,x.a,C.a,m];let O=(()=>{class t{}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(e){return new(e||t)},imports:[[...S]]}),t})()},iaau:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL");let s=(()=>{class t{}return t.\u0275mod=n.Gb({type:t}),t.\u0275inj=n.Fb({factory:function(e){return new(e||t)}}),t})()}}]);